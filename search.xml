<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>个人信息隐私保护的法律及技术双重角度思考</title>
    <url>/%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4%E7%9A%84%E6%B3%95%E5%BE%8B%E5%8F%8A%E6%8A%80%E6%9C%AF%E5%8F%8C%E9%87%8D%E8%A7%92%E5%BA%A6%E6%80%9D%E8%80%83.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>在新型网络环境下，中国在个人信息隐私保护方面愈发重视，本文从法律和技术两方面介绍了相关情况，并通过案例简析及借鉴国外相关法律，提出在现有法律基础上健全个人信息隐私保护范围、判定依据、明确权利内涵等建议，并建议结合区块链和云计算取证等新兴技术为个人信息隐私保护提供技术支持。</p>
<a id="more"></a>

<h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>&emsp;&emsp;中国互联网信息中心在2019年2月发布的第43次《中国互联网络发展状况统计报告》显示，截至2018年12月，中国网民规模达到8.29亿，全年新增网民5653万，互联网普及率达到59.6%，手机网民规模达到8.17亿，新增手机网民6433万，网民中手机使用比例达到98.6%。从数据中可知，中国已然是互联网大国，每天各类移动端APP、各类网络应用服务访问数量多不胜数，加之云计算、区块链、大数据等互联网新型技术的兴起和盛行，大数据物联网时代成为当下新型互联网时代的代名词。<br>&emsp;&emsp;处于新型互联网时代下的生活看似愈加便利快捷，但是百度CEO李彦宏在2018年3月26日的中国发展高层论坛中的一句话却引人深思，他说：“中国人对隐私问题的态度更开放，也相对来说没那么敏感。如果他们可以用隐私换取便利、安全或者效率。在很多情况下，他们就愿意这么做。当然我们也要遵循一些原则，如果这个数据能让用户受益，他们又愿意给我们用，我们就会去使用它的。我想这就是我们能做什么和不能做什么的基本标准。”新型互联网时代下，数据对于企业发展的重要性不言而喻，同样的，数据安全对于个人而言也尤为重要，尤其是涉及个人隐私等重要信息。每个人都希望社会生活更加便捷高效，但是并不意味着可以无条件牺牲个人信息，而应在有较好个人信息保障环境下，由个人自主选择提供个人信息的情景下，由互联网提供生活的便捷。<br>&emsp;&emsp;然而，当下中国的互联网环境，无论是法律体系制度、企业的自觉度、个人的保护意识，还是信息保护技术的发展，都尚未达到令人满意的程度，中国网络个人信息保护无论在法制还是技术上都任重道远。本文通过研究新型网络环境下的中国已有隐私保护法律现状及技术发展状况，对如何更好地实施个人信息隐私保护，从法律健全和技术支持两方面提出思考和建议。</p>
<h2 id="法律层面的分析及建议"><a href="#法律层面的分析及建议" class="headerlink" title="法律层面的分析及建议"></a>法律层面的分析及建议</h2><p>&emsp;&emsp;关于个人信息保护，不同行业机构都存在零散的规定条款<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="齐爱民,张哲.识别与再识别：个人信息的概念界定与立法选择[J].重庆大学学报,2018,24(2):119-131
">[5]</span></a></sup><sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="韩旭至.个人信息概念的法教义学分析[J].重庆大学学报,2018,24(2):154-165
">[6]</span></a></sup>，而在全国范围实行的法律条文有主要如下：</p>
<ul>
<li>《电信和互联网用户个人信息保护规定》的第四条和第九条，列举了在电信和互联网服务提供中对个人信息的定义和保护规定；</li>
<li>《网络安全法》中四十四条、四十五条和七十六条，对收集个人信息的合法性和保护规定进行明确；</li>
<li>《民法总则》第一百一十条和第一百一十一条，规定了隐私权以及个人信息受法律保护；</li>
<li>《侵权责任法》第二条，明确规定隐私权是公民的基本权利；</li>
<li>《关于加强网络信息保护的决定》第一条，指出公民个人信息受国家和法律保护。<br>&emsp;&emsp;总体而言，我国法律体系中尽管有涉及个人信息保护的相关规定，但是没有针对个人信息保护的专门法律及相应实施细则。在个人信息保护法律体系还未健全的情况下，国家互联网应急响应中心在2019年4月发布《2018年我国互联网网络安全态势综述》显示，个人用户信息包括姓名、身份证、个人资产、银行账户、地址等隐私遭到窃取的人数多达150万，移动应用APP在高权限下获取用户信息，假冒 “热点”APP等诱骗用户下载并提供个人信息等，都使得用户隐私信息遭到泄露。2018年圆通快递公司外泄约10亿用户信息，华住酒店集团泄露约5亿用户信息，万豪酒店泄露约5亿用户信息，顺丰速运泄露约3亿用户信息，这些只是影响较大而被披露才为人所知，实际上被泄露的个人用户信息可能还有更多。而作为用户个人，并不知道自己的信息何时被收集、何时被用于何事，除企业机构未能较好地保障用户信息原因外，无明确的可落地的实施细则也是重要因素。<br>&emsp;&emsp;此外，互联网环境本身是一个匿名化网络环境，尽管不像暗网、深网等对网络内容实施高度匿名化，但是也并非真实世界环境，由此也引发了如网络暴力、虚假消息传播、不良信息传播等负面影响事件。对此，国家通过网络实名制的方式，希望改善网络环境并为更有力的监管提供条件<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="李丽.秩序还是自由[J].法制与社会,2009.8,23:103-104
">[1]</span></a></sup>。<br>&emsp;&emsp;面对当下的网络环境因素，个人信息与隐私是否已经具备良好的保障机制？当前的法律体系对个人信息保护还需要哪方面的完善和细化？在新型网络环境下大数据的应用是否也能由新型技术进行保护数据的隐私属性不被利用？实施全面网络实名制是否可行？面对多种多样的新技术应用场景如何保障个人信息的安全性？这些疑问或许在很多人心中都存在，但如何消除疑问，如何解决困惑，是摆在立法执法部门面前亟待应对和解决的问题。<br>&emsp;&emsp;国外在个人信息保护立法方面，或多或少走在了中国前面，不少国家或组织已发布了相关法律和条例，例如《个人信息保护法》、《通用数据保护条例》、《个人数据法案》、《消费者隐私权利保护法案》等，为个人信息保护提供法理依据。<br>&emsp;&emsp;直接照搬国外的个人信息保护法律条例显然不适用于中国特色社会主义环境，中国并没有像美国一样的自身重视个人隐私的历史文化和像德国一样的法制土壤<sup id="fnref:12"><a href="#fn:12" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="靳海婷.美、德个人信息宪法保护路径比较与启示[J].重庆邮电大学学报,2018,30(4):46-55
">[12]</span></a></sup>。但我认为，对于西方的隐私保护法律中对个人信息和隐私的保护范围、判定依据、新型权利等条文，中国是可以借鉴的。例如，个人信息需要保护的属性包含哪些？其个体性和公共性是否应该规定限制的范围，还是依据不同情景进行动态平衡其判定标准？被遗忘权是否应归属到个人信息保护的权利范围？这些是可以参考国外的法律法规，并依据中国自身的网络环境和个人信息保护情况，吸收并制定更为合适中国国情的法律条文。<br>&emsp;&emsp;而对于网络实名制<sup id="fnref:10"><a href="#fn:10" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="张欢,杨霖.身份映射关系：网络实名制的法理基础[J].山西高等学校社会科学学报,2009,21(4):97-104
">[10]</span></a></sup><sup id="fnref:15"><a href="#fn:15" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="陈远,邹晶.网络实名制——规范网络信息传播的必由之路[J].2009,1:66-69
">[15]</span></a></sup><sup id="fnref:16"><a href="#fn:16" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="周永坤.网络实名制立法评析[J].暨南学报,2013,2:1-8
">[16]</span></a></sup>，尽管中国已经出台相关政策法规逐步推行网络实名制，但对于完全网络实名制仍在观望。我认为网络实名制推行的初衷是好的，是为了促进网络环境更加健康，但是网络实名制需要考虑其推行程度，即权衡匿名化是否不能存在于未来网络之中。本人支持有限制的实名制的观点<sup id="fnref:14"><a href="#fn:14" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="路鹃.网络匿名表达权在司法实践中的冲突与平衡[J].西南政法大学学报,2018,20(6):110-118
">[14]</span></a></sup>。网络实名制也有其积极作用，但是网络匿名化并非一无是处。网络匿名化本身使得一部分人能够更为理性的发表言论而无需担心遭到恶意报复，这在人民监督政府工作以及举报不良行为上有着积极作用；而实名制对于利用匿名网络而随意发动网络暴力、散播不良信息的行为有着遏制作用。因此，建议在需要实名化监管的领域推行实名制，而对于容易泄露隐私信息的领域采取匿名化。当然，匿名化不意味着肆意而为，匿名表达也需要受到约束和限制<sup id="fnref:7"><a href="#fn:7" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="杨福忠.公民网络匿名表达权之宪法保护——兼论网络实名制的正当性[J].法商研究,2012,5:32-39
">[7]</span></a></sup>，对于违反约束的匿名表达可以依靠技术手段进行控制。<h2 id="技术层面的分析及建议"><a href="#技术层面的分析及建议" class="headerlink" title="技术层面的分析及建议"></a>技术层面的分析及建议</h2>&emsp;&emsp;在法律制度难以监管的领域，可以通过技术进行弥补，从技术应用层面保护个人信息隐私。密码算法的更新迭代、取证技术的升级、匿名技术的衍变等技术应用都为隐私保护提供了技术保障，并为应对愈加复杂和潜在未知安全威胁的网络提供了对抗技术。<br>&emsp;&emsp;以网络实名制推行为例，韩国是世界首个全面推行网络实名制的国家，但是推行进程在四五年之后便惨遭终结<sup id="fnref:8"><a href="#fn:8" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="康美丽,曹凯.韩国网络实名制对我国网络管理的借鉴意义研究[J].情报杂志,2010,29:62-66
">[8]</span></a></sup>。一个主要原因便是实名制之后的保障技术还不够牢固，黑客攻击数据库并贩卖个人实名数据，致使实名制弊端凸显。同时，在大数据时代下，数据挖掘与关联分析技术得到应用，这无疑增加了隐私保护的困难程度。针对此类问题，学者们提出了多种匿名模型和算法，包括k-匿名规则、l-多样性模型、t-接近模型等基于数据发布的隐私保护技术，以及包括用户分类的隐私保护数据挖掘算法、基于安全多方计算与随机干扰结合的算法等针对数据挖掘的数据扰动隐私保护技术。<br>&emsp;&emsp;但是，数据隐私保护技术也存在着难点亟待突破，如全同态加密方案难以高性能实现具体应用、差分隐私保护算法的时间复杂度较高、大数据的爆发式增长带来的原有保护算法的扩展性问题等，这些既是中国隐私保护所要面对和攻克的技术难关，也是世界性的难题。<h2 id="总述"><a href="#总述" class="headerlink" title="总述"></a>总述</h2>&emsp;&emsp;基于以上论述，我个人认为，随着时代发展，个人自我隐私保护意识逐渐增强，隐私保护法等相关法律的出台呼声日益增长，更为细化的个人信息保护法规必将成为中国法律体系中的一员。而需要重点考虑的是：执法机构如何监查企业单位是否存在违法利用个人信息行为，对于个人的隐私采集知情权的维护应该如何具体化，对现有的隐私协议问题如何解决，用户面对冗长且带有法学专业术语的协议信息难以捕捉关键信息的问题如何应对，等等。<br>&emsp;&emsp;我建议，可以通过业界规定条文的试行，明确企业采集、使用、处理个人信息及涉及隐私的规范化流程；通过中和企业和个人用户之间对隐私信息的理解差异性，减少潜在的违法收集个人信息的擦边球行为；通过简化提炼隐私协议中的关键信息，让用户能直观清晰的了解与自身信息相关的采集与使用条款；同时，对人工智能带来的新产业模式（如无人驾驶中需要采集大量的真实信息数据，其中也会包括对乘车人的拍照等）等特定领域或新型领域相关的隐私保护，是否能在法律中留有空间并适应时代的发展调整，进而仍能对隐私保护提供法理依据。<br>&emsp;&emsp;面对固有隐私保护技术的瓶颈，或许去中心化思想的区块链技术能起到革新作用<sup id="fnref:18"><a href="#fn:18" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="周亮瑾.基于区块链和分布式数据库的铁路旅客隐私保护技术研究[D].北京：中国铁道科学研究院,2018">[18]</span></a></sup>，通过区块链技术的防丢失、防篡改、可追溯、可扩展性强、成本低等特性，为隐私信息提供更为高效的保护技术方案未尝不可，同时结合云计算取证技术为预防信息的违法利用提供进一步技术保障<sup id="fnref:17"><a href="#fn:17" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="李维奉,羌卫中,李伟明,邹德清.云环境隐私侵犯取证研究[J].网络与信息安全学报,2018,1(4):26-35
">[17]</span></a></sup>。<br>&emsp;&emsp;最终要实现个人信息与隐私的保护效果，我相信这是需要个人、企业、法律标准、技术支持等因素互相融合实现的，要做到事前知情同意、事中风险评估、事后个案认定，相信隐私保护在未来健全的法律保障和成熟的技术支持下，能够为每个人带来更加安稳、便捷的物联网生活。</li>
</ul>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>&emsp;&emsp;国内法律条款中规定个人信息保护的条款：</p>
<ol>
<li>《电信和互联网用户个人信息保护规定》<br>第四条“本规定所称用户个人信息，是指电信业务经营者和互联网信息服务提供者在提供服务的过程中收集的用户姓名、出生日期、身份证件号码、住址、电话号码、账号和密码等能够单独或者与其他信息结合识别用户的信息以及用户使用服务的时间、地点等信息。”<br>第九条“未经用户同意，电信业务经营者、互联网信息服务提供者不得收集、使用用户个人信息。”</li>
<li>《网络安全法》<br>第四十四条“任何个人和组织不得窃取或者以其他非法方式获取个人信息，不得非法出售或者非法向他人提供个人信息。”<br>第四十五条“依法负有网络安全监督管理职责的部门及其工作人员，必须对在履行职责中知悉的个人信息、隐私和商业秘密严格保密，不得泄露、出售或者非法向他人提供。”<br>第七十六条“本法下列用语的含义：<br>（一）网络，是指由计算机或者其他信息终端及相关设备组成的按照一定的规则和程序对信息进行收集、存储、传输、交换、处理的系统。<br>（二）网络安全，是指通过采取必要措施，防范对网络的攻击、侵入、干扰、破坏和非法使用以及意外事故，使网络处于稳定可靠运行的状态，以及保障网络数据的完整性、保密性、可用性的能力。<br>（三）网络运营者，是指网络的所有者、管理者和网络服务提供者。<br>（四）网络数据，是指通过网络收集、存储、传输、处理和产生的各种电子数据。<br>（五）个人信息，是指以电子或者其他方式记录的能够单独或者与其他信息结合识别自然人个人身份的各种信息，包括但不限于自然人的姓名、出生日期、身份证件号码、个人生物识别信息、住址、电话号码等。”</li>
<li>《民法总则》<br>第一百一十条“自然人享有生命权、身体权、健康权、姓名权、肖像权、名誉权、荣誉权、隐私权、婚姻自主权等权利。法人、非法人组织享有名称权、名誉权、荣誉权等权利。”<br>第一百一十一条“自然人的个人信息受法律保护。任何组织和个人需要获取他人个人信息的，应当依法取得并确保信息安全，不得非法收集、使用、加工、传输他人个人信息，不得非法买卖、提供或者公开他人个人信息。”</li>
<li>《侵权责任法》<br>第二条“侵害民事权益，应当依照本法承担侵权责任。本法所称民事权益，包括生命权、健康权、姓名权、名誉权、荣誉权、肖像权、隐私权、婚姻自主权、监护权、所有权、用益物权、担保物权、著作权、专利权、商标专用权、发现权、股权、继承权等人身、财产权益。”</li>
<li>《关于加强网络信息保护的决定》<br>为了保护网络信息安全，保障公民、法人和其他组织的合法权益，维护国家安全和社会公共利益，特作如下决定：<br>一、国家保护能够识别公民个人身份和涉及公民个人隐私的电子信息。<br>任何组织和个人不得窃取或者以其他非法方式获取公民个人电子信息，不得出售或者非法向他人提供公民个人电子信息。</li>
</ol>
<h2 id="发表"><a href="#发表" class="headerlink" title="发表"></a>发表</h2><p>&emsp;&emsp;本篇文章已由「中国保密协会科学技术分会」协助发表于<a href="https://mp.weixin.qq.com/s?__biz=MzIxMzI4ODI1MA==&mid=100000019&idx=1&sn=1842ac2ecc36047801d7d3d2176b647b&scene=18&xtrack=1&key=7d42e6f9dbc0e89199c107e6a8c8f5daef5d81e8c6ebd110471080554fa8f4a74119648d55ae607f92bb29617201a312497c4a08755bb092f57b9d074083b1eae63dbe28fe79ac5c6e794feb93f0bc76&ascene=1&uin=MTU3NTM1MzgzNw%3D%3D&devicetype=Windows+10&version=62080079&lang=zh_CN&exportkey=Ay54GAGxN%2FwUbAOXLcBaCf0%3D&pass_ticket=YvQE42U%2F9qwq7gt7gS3Qa1XSSgUMMf%2FdiIcRyDgktSwwuPhLv1pTuH2y18iO1ReZ" target="_blank" rel="noopener external nofollow noreferrer">中国保密协会科学技术分会官微</a>，可在官微文章中查找。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">李丽.秩序还是自由[J].法制与社会,2009.8,23:103-104<a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">陈兴蜀，杨露，罗永刚.大数据安全保护技术[J].工程科学与技术,2017.9,49(5):1-12<a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">徐琦.大数据时代美国隐私保护之困[N].Feature特写,2013,17:40-44<a href="#fnref:3" rev="footnote"> ↩</a></span></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">张弘.大数据下个人信息保护研究[D].兰州:兰州大学法学院,2018<a href="#fnref:4" rev="footnote"> ↩</a></span></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">齐爱民,张哲.识别与再识别：个人信息的概念界定与立法选择[J].重庆大学学报,2018,24(2):119-131<a href="#fnref:5" rev="footnote"> ↩</a></span></li><li id="fn:6"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">6.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">韩旭至.个人信息概念的法教义学分析[J].重庆大学学报,2018,24(2):154-165<a href="#fnref:6" rev="footnote"> ↩</a></span></li><li id="fn:7"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">7.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">杨福忠.公民网络匿名表达权之宪法保护——兼论网络实名制的正当性[J].法商研究,2012,5:32-39<a href="#fnref:7" rev="footnote"> ↩</a></span></li><li id="fn:8"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">8.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">康美丽,曹凯.韩国网络实名制对我国网络管理的借鉴意义研究[J].情报杂志,2010,29:62-66<a href="#fnref:8" rev="footnote"> ↩</a></span></li><li id="fn:9"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">9.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">肖岳.后网络安全时代个人隐私保护难题[N].特别报道,2018-02<a href="#fnref:9" rev="footnote"> ↩</a></span></li><li id="fn:10"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">10.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">张欢,杨霖.身份映射关系：网络实名制的法理基础[J].山西高等学校社会科学学报,2009,21(4):97-104<a href="#fnref:10" rev="footnote"> ↩</a></span></li><li id="fn:11"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">11.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">董习雯.完善无人驾驶汽车权益保护对策的分析[J].民商探索<a href="#fnref:11" rev="footnote"> ↩</a></span></li><li id="fn:12"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">12.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">靳海婷.美、德个人信息宪法保护路径比较与启示[J].重庆邮电大学学报,2018,30(4):46-55<a href="#fnref:12" rev="footnote"> ↩</a></span></li><li id="fn:13"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">13.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">王利明.人工智能时代对民法学的新挑战[J].东方学报,2018,3:4-9<a href="#fnref:13" rev="footnote"> ↩</a></span></li><li id="fn:14"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">14.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">路鹃.网络匿名表达权在司法实践中的冲突与平衡[J].西南政法大学学报,2018,20(6):110-118<a href="#fnref:14" rev="footnote"> ↩</a></span></li><li id="fn:15"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">15.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">陈远,邹晶.网络实名制——规范网络信息传播的必由之路[J].2009,1:66-69<a href="#fnref:15" rev="footnote"> ↩</a></span></li><li id="fn:16"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">16.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">周永坤.网络实名制立法评析[J].暨南学报,2013,2:1-8<a href="#fnref:16" rev="footnote"> ↩</a></span></li><li id="fn:17"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">17.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">李维奉,羌卫中,李伟明,邹德清.云环境隐私侵犯取证研究[J].网络与信息安全学报,2018,1(4):26-35<a href="#fnref:17" rev="footnote"> ↩</a></span></li><li id="fn:18"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">18.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">周亮瑾.基于区块链和分布式数据库的铁路旅客隐私保护技术研究[D].北京：中国铁道科学研究院,2018<a href="#fnref:18" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      <categories>
        <category>法律</category>
        <category>安全法</category>
      </categories>
      <tags>
        <tag>隐私保护</tag>
        <tag>法律与技术</tag>
        <tag>网络实名制</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客部署PWA</title>
    <url>/Hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2PWA.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>渐进式网络应用程序（Progressive Web Apps，PWA）是一种运用现代的 Web API 以及传统的渐进式增强策略创建的跨平台 Web 应用程序。这类应用程序应用广泛、功能丰富，结合现代化浏览器提供的功能和移动设备的体验优势，使其具有与原生应用相同的用户体验优势。<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[渐进式 Web 应用（PWA）|MDN web docs](https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps)
">[1]</span></a></sup></p>
<a id="more"></a>

<h2 id="PWA介绍"><a href="#PWA介绍" class="headerlink" title="PWA介绍"></a>PWA介绍</h2><p>当博客网站实现了 PWA 功能后，使用 Google Chrome 浏览器访问时，就会发现浏览器地址栏右侧有一个带圈的 ➕ 符号，并会提醒你安装此网页到桌面。如果你是用手机访问的话，Chrome 就会在页面的底部提醒你安装网站。<br>PWA的特点<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[博客实现PWA](https://guanqr.com/study/blog/realize-pwa/)
">[2]</span></a></sup>：</p>
<ul>
<li>安装博客到电脑或手机，以原生应用相同的方式浏览博客；</li>
<li>博客浏览速度更快；</li>
<li>可以离线浏览博客；</li>
</ul>
<ol>
<li>对于读者，博客可一触即达，且无浏览器的地址栏、菜单栏等「无关」干扰；对于博客，非常有利于博客的用户留存率，也利于博客的品牌形象;</li>
<li>可以利用 Service Worker 的缓存特点，极大地加速你的博客;</li>
<li>能让你的博客更贴近 APP 的形象。</li>
</ol>
<p>PWA部署对博客具有不少要求，需要网站支持全站HTTPS、响应式布局等，具体可参见<a href="https://developers.google.com/web/progressive-web-apps/checklist" target="_blank" rel="noopener external nofollow noreferrer">Checklist</a>，同时可以在网站<a href="https://www.webpagetest.org/lighthouse" target="_blank" rel="noopener external nofollow noreferrer">Lighthouse</a>检查博客网站是否满足PWA的要求。<br><img src="/images/pwa-lighthouse.png" alt="Lighthouse检测结果"><i class="img-caption">☆ Lighthouse检测结果</i></p>
<h2 id="PWA插件部署"><a href="#PWA插件部署" class="headerlink" title="PWA插件部署"></a>PWA插件部署</h2><p>Hexo支持PWA部署的插件有三款，来自网上教程<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[博客实现PWA](https://guanqr.com/study/blog/realize-pwa/)
">[2]</span></a></sup>的分享，三款插件各有利弊，同时另一款插件不局限于Hexo使用，且更具优点。实现PWA的Hexo插件：</p>
<table>
<thead>
<tr>
<th>插件名称</th>
<th align="center">安装方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://github.com/zoumiaojiang/hexo-service-worker" target="_blank" rel="noopener external nofollow noreferrer">hexo-sercive-worker</a></td>
<td align="center"><code>npm install hexo-service-worker --save</code></td>
<td><a href="#service-worker">hexo-service-worker配置</a></td>
</tr>
<tr>
<td><a href="https://github.com/JLHwung/hexo-offline" target="_blank" rel="noopener external nofollow noreferrer">hexo-offline</a></td>
<td align="center"><code>npm install hexo-offline --save</code></td>
<td><a href="#offline">hexo-offline配置</a></td>
</tr>
<tr>
<td><a href="https://github.com/lavas-project/hexo-pwa" target="_blank" rel="noopener external nofollow noreferrer">hexo-pwa</a></td>
<td align="center"><code>npm install hexo-pwa --save</code></td>
<td><a href="#hexo-pwa">hexo-pwa配置</a></td>
</tr>
</tbody></table>
<h3 id="hexo-service-worker配置"><a href="#hexo-service-worker配置" class="headerlink" title="hexo-service-worker配置"></a><span id="service-worker">hexo-service-worker配置</span></h3><p>在博客站点配置文件<code>../hexo/_config.yml</code>中配置<code>service worker</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># offline config passed to sw-precache.</span></span><br><span class="line"><span class="attr">service_worker:</span></span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes:</span> <span class="number">5242880</span></span><br><span class="line">  <span class="attr">staticFileGlobs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/about/index.html</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/favicon.ico</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/manifest.json</span></span><br><span class="line">  <span class="attr">stripPrefix:</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">verbose:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">runtimeCaching:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">urlPattern:</span> <span class="string">/**/*</span></span><br><span class="line">      <span class="attr">handler:</span> <span class="string">cacheFirst</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">origin:</span> <span class="string">hostname</span></span><br></pre></td></tr></table></figure>
<p><strong>配置说明</strong>：</p>
<ol>
<li><code>staticFileGlobs</code>是首次加载时主动缓存的文件，根据自身实际修改，建议不设置博客首页即<code>index.html</code>，否则要去除首页或更新为<code>Workbox</code>时用户需要手动清除浏览器缓存才能更新，但不加上首页可能导致无法离线访问博客。</li>
<li><code>origin</code>中<code>hostname</code>修改为博客域名。</li>
<li>博客支持全站HTTPS。</li>
</ol>
<p><strong>存在问题</strong><br>存在<code>sw.js</code>无法被浏览器识别的情况，网站无法自动更新，访问者需要手动清楚缓存才能访问最新内容。</p>
<h3 id="hexo-offline配置"><a href="#hexo-offline配置" class="headerlink" title="hexo-offline配置"></a><span id="offline">hexo-offline配置</span></h3><p>配置与<code>hexo-service-worker</code>基本一致，在博客站点配置文件<code>../hexo/_config.yml</code>中配置<code>offline</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># offline config passed to sw-precache.</span></span><br><span class="line"><span class="attr">offline:</span></span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes:</span> <span class="number">5242880</span></span><br><span class="line">  <span class="attr">staticFileGlobs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/about/index.html</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/favicon.ico</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/manifest.json</span></span><br><span class="line">  <span class="attr">stripPrefix:</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">verbose:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">runtimeCaching:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">urlPattern:</span> <span class="string">/**/*</span></span><br><span class="line">      <span class="attr">handler:</span> <span class="string">cacheFirst</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">origin:</span> <span class="string">hostname</span></span><br></pre></td></tr></table></figure>
<p>配置说明参照<code>hexo-service-worker配置说明</code>。</p>
<h3 id="hexo-pwa配置"><a href="#hexo-pwa配置" class="headerlink" title="hexo-pwa配置"></a><span id="hexo-pwa">hexo-pwa配置</span></h3><p>此处配置已经包含<code>manifest.json</code>的配置即无需额外配置<code>manifest.json</code>，当插件运行时会自动生成<code>manifest.json</code>，在博客站点配置文件<code>../hexo/_config.yml</code>中添加以下内容：</p>
<details>
<summary>点击查看具体代码</summary>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pwa:</span></span><br><span class="line">  <span class="attr">manifest:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/manifest.json</span></span><br><span class="line">    <span class="attr">body:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">hexo</span></span><br><span class="line">      <span class="attr">short_name:</span> <span class="string">hexo</span></span><br><span class="line">      <span class="attr">icons:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">src:</span> <span class="string">/images/android-chrome-192x192.png</span></span><br><span class="line">          <span class="attr">sizes:</span> <span class="string">192x192</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">image/png</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">src:</span> <span class="string">/images/android-chrome-512x512.png</span></span><br><span class="line">          <span class="attr">sizes:</span> <span class="string">512x512</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">image/png</span></span><br><span class="line">      <span class="attr">start_url:</span> <span class="string">/index.html</span></span><br><span class="line">      <span class="attr">theme_color:</span> <span class="string">'#ffffff'</span></span><br><span class="line">      <span class="attr">background_color:</span> <span class="string">'#ffffff'</span></span><br><span class="line">      <span class="attr">display:</span> <span class="string">standalone</span></span><br><span class="line">  <span class="attr">serviceWorker:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/sw.js</span></span><br><span class="line">    <span class="attr">preload:</span></span><br><span class="line">      <span class="attr">urls:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/</span></span><br><span class="line">      <span class="attr">posts:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">opts:</span></span><br><span class="line">      <span class="attr">networkTimeoutSeconds:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pattern:</span> <span class="type">!!js</span><span class="string">/regexp</span> <span class="string">/hm.baidu.com/</span></span><br><span class="line">        <span class="attr">strategy:</span> <span class="string">networkOnly</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pattern:</span> <span class="type">!!js</span><span class="string">/regexp</span> <span class="string">/.*\.(js|css|jpg|jpeg|png|gif)$/</span></span><br><span class="line">        <span class="attr">strategy:</span> <span class="string">cacheFirst</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">pattern:</span> <span class="type">!!js</span><span class="string">/regexp</span> <span class="string">/\//</span></span><br><span class="line">        <span class="attr">strategy:</span> <span class="string">networkFirst</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
</details>
**配置说明**
1. `manifest`部分即对应`manifest.json`的配置，、；
2. `serviceWorker`对应缓存信息配置。`preload`中`posts`表示需要缓存的文章数量，`urls`表示需要缓存的页面地址，填写格式即加入缓存页面对应的目录名称，如下：
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 缓存首页</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/</span></span><br><span class="line"><span class="comment"># 缓存标签页</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/tags/</span></span><br></pre></td></tr></table></figure>

<h3 id="配置manifest-json实现PWA添加到桌面"><a href="#配置manifest-json实现PWA添加到桌面" class="headerlink" title="配置manifest.json实现PWA添加到桌面"></a><span id="manifest">配置<code>manifest.json</code>实现PWA添加到桌面</span></h3><p>要实现PWA必须要配置<code>manifest.json</code>，因为PWA的启动需要依赖其中的配置，当前各版本浏览器对其支持情况可参照<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_compatibility_for_manifest.json" target="_blank" rel="noopener external nofollow noreferrer">Browser compatibility for manifest.json</a>。<br>配置<code>manifest.json</code>需要配置应用图标、名称等基本信息，在<code>../hexo/source</code>下新建<code>manifest.json</code>，基本的配置信息参照如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"short_name"</span>: <span class="string">"短名称"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"这是一个完整名称"</span>,</span><br><span class="line">    <span class="attr">"icon"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"src"</span>: <span class="string">"icon.png"</span>,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"image/png"</span>,</span><br><span class="line">            <span class="attr">"sizes"</span>: <span class="string">"512x512"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"background_color"</span>: <span class="string">"#2196f3"</span>,</span><br><span class="line">    <span class="attr">"display"</span>: <span class="string">"standalone"</span>,</span><br><span class="line">    <span class="attr">"start_url"</span>: <span class="string">"index.html"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置信息也可以在<a href="https://app-manifest.firebaseapp.com/" target="_blank" rel="noopener external nofollow noreferrer">Web App Manifest Generator</a>进行生成，更多详细配置可参照LAVAS<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[manifest.json 简介](https://lavas.baidu.com/pwa/engage-retain-users/add-to-home-screen/introduction)">[3]</span></a></sup>。<br>在博客中配置引用<code>manifest.json</code>，在博客的<code>&lt;head&gt;</code>标签引入，在<code>../next/_config.yml</code>主题配置文件中开启自定义文件<code>head.swig</code>（自定义主题样式可参照另一篇博客《<a href="https://linwhitehat.github.io/%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96.html">博客优化(Hexo博客Next主题自定义设计)</a>》），添加下属引用内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;link rel&#x3D;&quot;manifest&quot; href&#x3D;&quot;&#x2F;manifest.json&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>博客部署完成后，可在chrome浏览的开发者模式窗口（按<code>F12</code>）查看<code>Application</code>，即可看到配置的信息以及网站缓存信息。<br><img src="/images/pwa-manifest.png" alt="查看部署结果"><i class="img-caption">☆ 查看部署结果</i></p>
<h3 id="Workbox部署"><a href="#Workbox部署" class="headerlink" title="Workbox部署"></a>Workbox部署</h3><p>当前博客实现PWA使用的方式，部署步骤如下：</p>
<ol>
<li>配置<code>manifest.json</code>，具体参照<a href="#manifest">配置manifest.json</a>。</li>
<li>安装<a href="https://nodejs.org/zh-cn/download/" target="_blank" rel="noopener external nofollow noreferrer">Node.js</a>（Hexo博客基于Node.js，因此跳过此步）。</li>
<li>安装插件</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install workbox-build gulp gulp-uglify readable-stream uglify-es --save-dev</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>安装<code>gulp</code>插件<br>安装<code>gulp</code>记得需要在全局环境下进行安装，不要只在博客根目录下的环境进行安装，否则会导致<code>gulp</code>无法正常执行。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install gulp --save  <span class="comment">#安装gulp</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>在博客站点根目录新建配置文件<code>../hexo/gulpfile.js</code>，添加内容如下：<details>
<summary>点击查看具体代码</summary>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> gulp = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">const</span> workbox = <span class="built_in">require</span>(<span class="string">"workbox-build"</span>);</span><br><span class="line"><span class="keyword">const</span> uglifyes = <span class="built_in">require</span>(<span class="string">'uglify-es'</span>);</span><br><span class="line"><span class="keyword">const</span> composer = <span class="built_in">require</span>(<span class="string">'gulp-uglify/composer'</span>);</span><br><span class="line"><span class="keyword">const</span> uglify = composer(uglifyes, <span class="built_in">console</span>);</span><br><span class="line"><span class="keyword">const</span> pipeline = <span class="built_in">require</span>(<span class="string">'readable-stream'</span>).pipeline;</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'generate-service-worker'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> workbox.injectManifest(&#123;</span><br><span class="line">        swSrc: <span class="string">'./sw-template.js'</span>,</span><br><span class="line">        swDest: <span class="string">'./public/sw.js'</span>,</span><br><span class="line">        globDirectory: <span class="string">'./public'</span>,</span><br><span class="line">        globPatterns: [</span><br><span class="line">            <span class="string">"**/*.&#123;html,css,js,json,woff2&#125;"</span></span><br><span class="line">        ],</span><br><span class="line">        modifyURLPrefix: &#123;</span><br><span class="line">            <span class="string">""</span>: <span class="string">"./"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">"uglify"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> pipeline(</span><br><span class="line">        gulp.src(<span class="string">"./public/sw.js"</span>),</span><br><span class="line">        uglify(),</span><br><span class="line">        gulp.dest(<span class="string">"./public"</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">"build"</span>, gulp.series(<span class="string">"generate-service-worker"</span>, <span class="string">"uglify"</span>));</span><br></pre></td></tr></table></figure>
</details></li>
</ol>
<p><strong>配置说明</strong><br>1）<code>globPatterns</code>表示需要缓存的文件匹配模式，这里将<code>html</code>、<code>css</code>、<code>js</code>、<code>json</code>和<code>woff2</code>类型文件进行缓存，当博客首次加载时会自动缓存这些文件；<br>2）若是博客使用<code>gulp</code>压缩了源码，以上配置内容与之前配置信息重复的部分可忽略。<br>6. 在博客站点根目录新建配置文件<code>../hexo/sw-template.js</code>，添加内容如下：</p>
<details>
<summary>点击查看具体代码</summary>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> workboxVersion = <span class="string">'5.0.0'</span>;</span><br><span class="line"></span><br><span class="line">importScripts(<span class="string">`https://storage.googleapis.com/workbox-cdn/releases/<span class="subst">$&#123;workboxVersion&#125;</span>/workbox-sw.js`</span>);</span><br><span class="line"></span><br><span class="line">workbox.core.setCacheNameDetails(&#123;</span><br><span class="line">    prefix: <span class="string">"Blog_name"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">workbox.core.skipWaiting();</span><br><span class="line"></span><br><span class="line">workbox.core.clientsClaim();</span><br><span class="line"></span><br><span class="line">workbox.precaching.precacheAndRoute(self.__WB_MANIFEST);</span><br><span class="line"></span><br><span class="line">workbox.precaching.cleanupOutdatedCaches();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Images</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /\.(?:png|jpg|jpeg|gif|bmp|webp|svg|ico)$/,</span><br><span class="line">    <span class="keyword">new</span> workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: <span class="string">"images"</span>,</span><br><span class="line">        plugins: [</span><br><span class="line">            <span class="keyword">new</span> workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: <span class="number">1000</span>,</span><br><span class="line">                maxAgeSeconds: <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [<span class="number">0</span>, <span class="number">200</span>]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fonts</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /\.(?:eot|ttf|woff|woff2)$/,</span><br><span class="line">    <span class="keyword">new</span> workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: <span class="string">"fonts"</span>,</span><br><span class="line">        plugins: [</span><br><span class="line">            <span class="keyword">new</span> workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: <span class="number">1000</span>,</span><br><span class="line">                maxAgeSeconds: <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [<span class="number">0</span>, <span class="number">200</span>]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Google Fonts</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/fonts\.googleapis\.com/,</span><br><span class="line">    <span class="keyword">new</span> workbox.strategies.StaleWhileRevalidate(&#123;</span><br><span class="line">        cacheName: <span class="string">"google-fonts-stylesheets"</span></span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/fonts\.gstatic\.com/,</span><br><span class="line">    <span class="keyword">new</span> workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: <span class="string">'google-fonts-webfonts'</span>,</span><br><span class="line">        plugins: [</span><br><span class="line">            <span class="keyword">new</span> workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: <span class="number">1000</span>,</span><br><span class="line">                maxAgeSeconds: <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [<span class="number">0</span>, <span class="number">200</span>]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Static Libraries</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/cdn\.jsdelivr\.net/,</span><br><span class="line">    <span class="keyword">new</span> workbox.strategies.CacheFirst(&#123;</span><br><span class="line">        cacheName: <span class="string">"static-libs"</span>,</span><br><span class="line">        plugins: [</span><br><span class="line">            <span class="keyword">new</span> workbox.expiration.ExpirationPlugin(&#123;</span><br><span class="line">                maxEntries: <span class="number">1000</span>,</span><br><span class="line">                maxAgeSeconds: <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span><br><span class="line">                statuses: [<span class="number">0</span>, <span class="number">200</span>]</span><br><span class="line">            &#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// External Images</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">    /^https:\/\/raw\.githubusercontent\.com\/reuixiy\/hugo-theme-meme\/master\/<span class="keyword">static</span>\/icons\/.*<span class="regexp">/,</span></span><br><span class="line"><span class="regexp">    new workbox.strategies.CacheFirst(&#123;</span></span><br><span class="line"><span class="regexp">        cacheName: "external-images",</span></span><br><span class="line"><span class="regexp">        plugins: [</span></span><br><span class="line"><span class="regexp">            new workbox.expiration.ExpirationPlugin(&#123;</span></span><br><span class="line"><span class="regexp">                maxEntries: 1000,</span></span><br><span class="line"><span class="regexp">                maxAgeSeconds: 60 * 60 * 24 * 30</span></span><br><span class="line"><span class="regexp">            &#125;),</span></span><br><span class="line"><span class="regexp">            new workbox.cacheableResponse.CacheableResponsePlugin(&#123;</span></span><br><span class="line"><span class="regexp">                statuses: [0, 200]</span></span><br><span class="line"><span class="regexp">            &#125;)</span></span><br><span class="line"><span class="regexp">        ]</span></span><br><span class="line"><span class="regexp">    &#125;)</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">workbox.googleAnalytics.initialize();</span></span><br></pre></td></tr></table></figure>
</details>
**配置说明**
1）`prefix`参数内容`Blog_name`修改为博客名称，具体参照[Workbox_v5.0.0](https://github.com/GoogleChrome/workbox/releases)；
2）将参数`workboxVersion`修改为最新发布版，其他内容可根据自身情况修改；
3）其他缓存策略参考[相关文档](https://developers.google.com/web/tools/workbox/modules/workbox-strategies)，不建议缓存视频和图片。
7. 注册`Service Worker`

<p>在博客HTML页面加入<code>Service Worker</code>注册信息及页面更新提醒，在<code>../next/layout/_layout.swig</code>中找到<code>&lt;body&gt;&lt;/body&gt;</code>标签对，在标签内加入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app-refresh"</span> id=<span class="string">"app-refresh"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app-refresh-wrap"</span> onclick=<span class="string">"location.reload()"</span>&gt;</span><br><span class="line">        &lt;label&gt;已更新最新版本&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">        &lt;span&gt;点击刷新&lt;/</span>span&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">        <span class="keyword">if</span> (navigator.serviceWorker.controller) &#123;</span><br><span class="line">            navigator.serviceWorker.addEventListener(<span class="string">'controllerchange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                showNotification();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            navigator.serviceWorker.register(<span class="string">'/sw.js'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showNotification</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">'meta[name=theme-color]'</span>).content = <span class="string">'#000'</span>;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'app-refresh'</span>).className += <span class="string">' app-refresh-show'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="8">
<li>添加CSS样式</li>
</ol>
<p>在自定义样式文件<code>../hexo/source/_data/styles.styl</code>中修改，添加以下内容：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.app-refresh</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">3em</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">42</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.app-refresh-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.app-refresh-wrap</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.app-refresh-show</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="9">
<li>避免<code>manifest.json</code>在部署时被修改</li>
</ol>
<p>在博客配置文件<code>../hexo/_config.yml</code>找到<code>skip_render</code>，做出以下修改：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">+</span> <span class="attr">skip_render:</span> <span class="string">[README.md,manifest.json]</span></span><br></pre></td></tr></table></figure>
<ol start="10">
<li>部署</li>
</ol>
<p>运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">gulp build</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>这篇博客是Hexo博客优化系列的补充，为博客部署PWA，使博客在多平台能快捷访问且支持离线访问，同时在部署过程中将遇到的问题及解决方式进行分享，同时感谢博主<code>Guan Qirui</code>在博客优化中给予的帮助。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener external nofollow noreferrer">渐进式 Web 应用（PWA）|MDN web docs</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://guanqr.com/study/blog/realize-pwa/" target="_blank" rel="noopener">博客实现PWA</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://lavas.baidu.com/pwa/engage-retain-users/add-to-home-screen/introduction" target="_blank" rel="noopener external nofollow noreferrer">manifest.json 简介</a><a href="#fnref:3" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      <categories>
        <category>技术分享</category>
        <category>博客</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>PWA</tag>
        <tag>gulp</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化(Hexo博客Next主题设计)</title>
    <url>/%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>博客搭建完成后，最初的博客雏形一般都比较朴素，功能也有限，所以可以通过优化主题来进行美化博客外观和拓展博客功能。本篇文章主要以可正常访问的Hexo.Mist原型博客为基础，根据自身需求加以优化，而最新版（V7.7）中其实包含很多美化设置，但是默认是关闭状态，同时个性化配置需要修改配置文件等，即使出现一个字母的差错也会导致失效，因此本文对配置文件会具体说明，而目录均是按照我的博客搭建博文中说明的目录结构，可以根据自身目录结构进行转换，博文中展示的图片可能来自参考文章，若参考文章内容与实际存在差异会附上实际图片。</p>
<a id="more"></a>

<h2 id="优化主题"><a href="#优化主题" class="headerlink" title="优化主题"></a>优化主题</h2><p>我的个人博客是<a href="https://linwhitehat.github.io/">林深时见璐</a>，本文优化的效果可以访问博客进行观看。</p>
<h3 id="阅读全文设置"><a href="#阅读全文设置" class="headerlink" title="阅读全文设置"></a>阅读全文设置</h3><p>由于初始博客并没有设置摘要的形式，因此博客首页会展示每篇博文的全文，显得十分冗长，为此设置<code>阅读全文</code>能简化博客首页，且让博文能以简短的摘要进行展示。<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[设置阅读全文](https://www.jianshu.com/p/78c218f9d1e7)
">[1]</span></a></sup></p>
<p>设置方法采用的是在博文中选择适当位置进行内容截断，填写以下内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- more --&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样首页便只会展示在截断位置前的内容。</p>
<h3 id="分类板块二级目录显示"><a href="#分类板块二级目录显示" class="headerlink" title="分类板块二级目录显示"></a><code>分类板块</code>二级目录显示</h3><p>在类别模块，往往只显示一种类别，但有时候博客之间归属一大类却各有差异，因此设计二级分类目录，使得类别简洁的同时又能将具体博文区别。因为Hexo原生支持父子分类，在博文撰写的<code>md</code>文件首部<code>categories</code>下原先的类别A下再写一个类别B，即可得到父子类的效果，A为父类，B为子类，示例如下<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[分类二级目录](https://hexo.io/zh-cn/docs/front-matter.html)
">[2]</span></a></sup>：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="deletion">- 技术</span></span><br><span class="line"><span class="deletion">- 博客搭建</span></span><br></pre></td></tr></table></figure>

<h3 id="评论系统使用utteranc"><a href="#评论系统使用utteranc" class="headerlink" title="评论系统使用utteranc"></a>评论系统使用<code>utteranc</code></h3><p>原先使用的是主题自带的<code>gitalk</code>作为博客评论系统，而更改为<code>utteranc</code>的原因有两个：<br>1）<code>gitalk</code>存在原始配置泄露及访问授权等<a href="https://github.com/gitalk/gitalk/issues/343" target="_blank" rel="noopener external nofollow noreferrer" title="https://github.com/gitalk/gitalk/issues/343">问题</a>，<code>utteranc</code>具备细粒度的权限控制，且接受隐私项目授权；<br>2）二者都是基于GitHub的issue系统进行评论，很好转换。</p>
<p>转换评论系统首先将<code>gitalk</code>在<code>../next/_config.yml</code>中设置为<code>false</code>，将GitHub中授权的应用删除。安装<code>utteranc</code>步骤如下<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[评论系统](https://wangjiezhe.com/posts/2018-10-29-Hexo-NexT-3/)
">[3]</span></a></sup>：<br>1）在GitHub APP中安装<code>utterances</code>，链接为<a href="https://github.com/apps/utterances" target="_blank" rel="noopener external nofollow noreferrer">https://github.com/apps/utterances</a>，安装后如图：<br><img src="https://wangjiezhe.com/posts/2018-10-29-Hexo-NexT-3/5bd723ae73cb3.webp" alt="utterance应用安装"><i class="img-caption">☆ utterance应用安装</i><br>2）安装插件，在hexo文件目录下打开<code>git bash</code>，安装如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install theme-next/hexo-next-utteranc</span><br></pre></td></tr></table></figure>
<p>3）在<code>../next/layout/_third-party/comments/</code>中新建文件<code>utterances.swig</code>，写入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.utteranc.enable %&#125;</span><br><span class="line">  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;utteranc.es&#x2F;client.js&quot;</span><br><span class="line">    repo&#x3D;&quot;&#123;&#123; theme.utteranc.repo &#125;&#125;&quot;</span><br><span class="line">    issue-term&#x3D;&quot;&#123;&#123; theme.utteranc.issue_term &#125;&#125;&quot;</span><br><span class="line">    theme&#x3D;&quot;&#123;&#123; theme.utteranc.theme &#125;&#125;&quot;</span><br><span class="line">    crossorigin&#x3D;&quot;anonymous&quot;</span><br><span class="line">    async&gt;</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>4）在<code>../next/layout/_partials/comments.swig</code>中找到最后一句<code>elseif</code>并在其中的<code>&lt;div&gt;&lt;/div&gt;</code>后面增添以下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% elseif theme.utteranc.enable %&#125;</span><br><span class="line">      &lt;div class&#x3D;&quot;comments&quot; id&#x3D;&quot;comments&quot;&gt;</span><br><span class="line">        &#123;% include &#39;..&#x2F;_third-party&#x2F;comments&#x2F;utterances.swig&#39; %&#125;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<p>5）在<code>../next/_config.yml</code>添加下面的配置内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Demo: https://utteranc.es/  http://trumandu.github.io/about/</span></span><br><span class="line"><span class="attr">utteranc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">linwhitehat/linwhitehat.github.io</span></span><br><span class="line">  <span class="attr">pathname:</span> <span class="string">pathname</span></span><br><span class="line">  <span class="comment"># theme: github-light,github-dark,github-dark-orange</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span></span><br><span class="line">  <span class="attr">cdn:</span> <span class="string">https://utteranc.es/client.js</span></span><br><span class="line">  <span class="comment"># If you want to modify priority, please config in **hexo**</span></span><br><span class="line">  <span class="comment">#priority:</span></span><br></pre></td></tr></table></figure>
<p>更新完博客配置后，便能看到之前使用gitalk留下的评论，同时也能发表新评论。</p>
<h3 id="图片设置"><a href="#图片设置" class="headerlink" title="图片设置"></a>图片设置</h3><ol>
<li>图片放大查看的功能，这是默认功能，可以选择使用的插件<code>fancybox</code>或<code>mediumzoom</code>，我使用后者，在<code>../next/_config.yml</code>中搜索<code>mediumzoom</code>，将<code>false</code>改为<code>true</code>。</li>
<li>图片标题说明，当前的配置情况下，即使使用下面展示的markdown语法中的图片说明也无法正常显示在博客中，其中<code>Optional title</code>是图片的title属性，若使用Next主题中的<code>fancybox</code>插件则自动会显示，其他的配置则需要更改Hexo渲染组件。<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">Alt text</span>](<span class="link">../img.jpg "Optional title"</span>)</span><br></pre></td></tr></table></figure>
修改渲染配置步骤如下：<br>1）在<code>../hexo/node_modules/marked/lib/marked.js</code>中进行下述修改，其中<code>-</code>表示删除<code>+</code>表示增加：<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">Renderer.prototype.image = function(href, title, text) &#123;</span><br><span class="line"><span class="deletion">- href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);</span></span><br><span class="line"><span class="deletion">- if (href === null) &#123;</span></span><br><span class="line"><span class="deletion">-   return text;</span></span><br><span class="line"><span class="deletion">-&#125;</span></span><br><span class="line"><span class="addition">+ if (this.options.baseUrl &amp;&amp; !originIndependentUrl.test(href)) &#123;</span></span><br><span class="line"><span class="addition">+   href = resolveUrl(this.options.baseUrl, href);</span></span><br><span class="line"><span class="addition">+ &#125;</span></span><br><span class="line"><span class="addition">+ var out = '&lt;img src="' + href + '" alt="' + text + '"';</span></span><br><span class="line">  if (title) &#123;</span><br><span class="line"><span class="deletion">-   out += ' title="' + title + '"';</span></span><br><span class="line"><span class="addition">+   out += '&gt;' + '&lt;i class="img-caption"&gt;' + '◎ ' + title + '&lt;/i';</span></span><br><span class="line">  &#125;</span><br><span class="line">  out += this.options.xhtml ? '/&gt;' : '&gt;';</span><br><span class="line">  return out;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
2）增加自定义CSS样式，在<code>../source/_data/styles.styl</code>中增加以下内容：<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.img-caption</span> &#123;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> .<span class="number">7em</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: STKaiti, serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>图片居中<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[图片居中设置](https://blog.singee.me/2017/12/07/mist-img-center/)
">[4]</span></a></sup></li>
</ol>
<p>在<code>../next/source/css/_schemes/Mist/_posts-expanded.styl</code>中找到<code>.posts-expand</code>中的下列内容：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>将其修改为：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="博文脚注"><a href="#博文脚注" class="headerlink" title="博文脚注"></a>博文脚注</h3><p>脚注也可以叫注脚，Hexo自带的默认markdown编辑器渲染效果不支持脚注的显示，因此安装插件进行渲染支持，我使用的是<a href="https://github.com/kchen0x/hexo-reference" target="_blank" rel="noopener external nofollow noreferrer" title="https://github.com/kchen0x/hexo-reference">hexo-reference</a>，整体效果更可观，安装如下<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[插入脚注](https://guanqr.com/study/blog/hexo-theme-next-customization/)
">[5]</span></a></sup><sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[注脚选择](https://benzblog.site/2019-07-12-HexoTricks/)
">[6]</span></a></sup>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-reference --save</span><br></pre></td></tr></table></figure>
<p>在博客撰写的md文件中使用如下（<code>^</code>和数字之间不需要空格）：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">博客脚注[^ 1]。</span><br><span class="line">[<span class="symbol">^ 1</span>]: <span class="link">我的博客。</span></span><br></pre></td></tr></table></figure>

<h3 id="修改篇尾的标签符号"><a href="#修改篇尾的标签符号" class="headerlink" title="修改篇尾的标签符号"></a>修改篇尾的标签符号</h3><p>默认的标签符号是<code>#</code>，可以使用自带的标签图案，修改方式即在<code>../next/_config.yml</code>中将<code>tag_icon</code>更改为<code>true</code>。<br><img src="https://i.imgur.com/LVHYdOp.png" alt="old_tag"><i class="img-caption">☆ old_tag</i><br><img src="https://i.imgur.com/KVFYpSF.png" alt="new_tag"><i class="img-caption">☆ new_tag</i></p>
<h3 id="修改分割线"><a href="#修改分割线" class="headerlink" title="修改分割线"></a>修改分割线</h3><p>原先的默认分割线是虚线，将其修改为实线，在<code>../next/source/css/_common/scaffolding/base.styl</code>中将下属配置删除<sup id="fnref:7"><a href="#fn:7" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[分割线样式修改](https://blog.bill.moe/hexo-theme-next-config-optimization/)
">[7]</span></a></sup>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">background-image</span>: <span class="selector-tag">repeating-linear-gradient</span>(<span class="selector-tag">-45deg</span>, <span class="selector-tag">white</span>, <span class="selector-tag">white</span> 4<span class="selector-tag">px</span>, <span class="selector-tag">transparent</span> 4<span class="selector-tag">px</span>, <span class="selector-tag">transparent</span> 8<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>

<h3 id="页脚显示博客运行时间"><a href="#页脚显示博客运行时间" class="headerlink" title="页脚显示博客运行时间"></a>页脚显示博客运行时间</h3><p>在博客页脚显示博客运行时间<sup id="fnref:8"><a href="#fn:8" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[页脚显示博客运行时间](http://eternalzttz.com/hexo-next.html)
">[8]</span></a></sup>，这个在默认主题配置中并没有，因此需要自己添加，修改配置文件是<code>../next/layout/_partials/footer.swig</code>，在配置文件中找到你想显示在博客页脚的位置，比如我配置在主题版本信息下，显示效果如图：<br><img src="/images/run_time_result.png" alt="博客运行时间"><i class="img-caption">☆ 博客运行时间显示效果</i><br>不同配置位置可以自行尝试修改，具体添加代码如下：</p>
<details>
<summary>点击查看具体代码</summary>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;days&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">function show_date_time()&#123;</span><br><span class="line">    window.setTimeout(&quot;show_date_time()&quot;, 1000);</span><br><span class="line">    BirthDay&#x3D;new Date(&quot;01&#x2F;10&#x2F;2019 00:13:14&quot;);&#x2F;&#x2F;修改为自己的blog建站时间</span><br><span class="line">    today&#x3D;new Date();</span><br><span class="line">    timeold&#x3D;(today.getTime()-BirthDay.getTime());</span><br><span class="line">    sectimeold&#x3D;timeold&#x2F;1000</span><br><span class="line">    secondsold&#x3D;Math.floor(sectimeold);</span><br><span class="line">    msPerDay&#x3D;24*60*60*1000</span><br><span class="line">    e_daysold&#x3D;timeold&#x2F;msPerDay</span><br><span class="line">    daysold&#x3D;Math.floor(e_daysold);</span><br><span class="line">    e_hrsold&#x3D;(e_daysold-daysold)*24;</span><br><span class="line">    hrsold&#x3D;setzero(Math.floor(e_hrsold));</span><br><span class="line">    e_minsold&#x3D;(e_hrsold-hrsold)*60;</span><br><span class="line">    minsold&#x3D;setzero(Math.floor((e_hrsold-hrsold)*60));</span><br><span class="line">    seconds&#x3D;setzero(Math.floor((e_minsold-minsold)*60));</span><br><span class="line">    document.getElementById(&#39;days&#39;).innerHTML&#x3D;&quot;本站已安全运行&quot;+daysold+&quot;天&quot;+hrsold+&quot;小时&quot;+minsold+&quot;分&quot;+seconds+&quot;秒&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function setzero(i)&#123;</span><br><span class="line">    if (i&lt;10)</span><br><span class="line">    &#123;i&#x3D;&quot;0&quot; + i&#125;;</span><br><span class="line">    return i;</span><br><span class="line">&#125;</span><br><span class="line">show_date_time();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
</details>

<h3 id="显示博客阅读数量"><a href="#显示博客阅读数量" class="headerlink" title="显示博客阅读数量"></a>显示博客阅读数量</h3><p>已经有许多教程，在博客主题配置中也有多种选择，根据网上教程的介绍，busuanzi插件只能在博文显示阅读数，因此我选择部署LeanCloud插件来显示阅读数，但是在部署过程中遇到不少问题，而且没有在任何教程中找到完整的说明，尽管网上也有可行的教程<sup id="fnref:9"><a href="#fn:9" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[部署LeanCloud显示阅读数量](https://yunhao.space/2018/06/27/hexo-leancloud-plugin-installation-tutor/)
">[9]</span></a></sup>，我还是记录下来。</p>
<h4 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h4><p>在<a href="https://www.leancloud.cn/" target="_blank" rel="noopener external nofollow noreferrer">LeanCloud</a>官网中进行注册并登录。</p>
<h4 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h4><p>进入控制台之后，点击<code>创建应用</code>，填写应用名称，<code>计价方案</code>选择开发版，创建成功之后，在对应应用右上角点击齿轮状的设置，如图：<br><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/3.png" alt="LeanCloud应用设置"><i class="img-caption">☆ LeanCloud应用设置</i><br>在设置界面，选择<code>存储</code>，选择<code>创建Class</code>，<code>Class名称</code>输入<code>Counter</code>，因为这个类名与Next主题兼容，默认ACL权限设置为<code>无限制</code>即所有用户可读可写。<br>在设置界面，选择<code>设置</code>，选择<code>应用Keys</code>，将界面显示的<code>AppID</code>和<code>AppKey</code>复制，在主题配置文件修改时需要使用。<br>在上述的<code>设置</code>选项下选择<code>安全中心</code>，在<code>Web安全域名</code>的填写框中输入博客的完整域名，保证统计数据只在记录的域名中有效。</p>
<h4 id="博客配置"><a href="#博客配置" class="headerlink" title="博客配置"></a>博客配置</h4><p>在博客的<code>../next/_config.yml</code>配置文件中，找到<code>leancloud_visitors</code>，设置配置信息如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></span><br><span class="line"><span class="attr">leancloud_visitors:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> </span><br><span class="line">  <span class="attr">app_key:</span> </span><br><span class="line">  <span class="comment"># Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span></span><br><span class="line">  <span class="comment"># If you don't care about security in lc counter and just want to use it directly</span></span><br><span class="line">  <span class="comment"># (without hexo-leancloud-counter-security plugin), set the `security` to `false`.</span></span><br><span class="line">  <span class="attr">security:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">betterPerformance:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><code>app_id</code>处填写应用配置时复制的<code>AppID</code>，<code>app_key</code>填写应用配置时复制的<code>AppKey</code>。</p>
<h4 id="安全插件安装及部署"><a href="#安全插件安装及部署" class="headerlink" title="安全插件安装及部署"></a>安全插件安装及部署</h4><p>如果上述配置完成后，更新部署博客，能够正常显示阅读数量，后续的内容可以选择跳过。<br>如果上述配置不能正常显示阅读数量，且存在<code>Counter not initialized! See more at console err msg.</code>的问题，此时在博客页面打开控制台（Chrome下按<code>F12</code>或右键选择<code>检查</code>），点击<code>Console</code>查看是否存在下图显示内容：<br><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/8.png" alt="Count类未初始化问题"><i class="img-caption">☆ Count类未初始化问题</i><br>这是因为LeanCloud插件存在安全问题，需要安装另一个插件<code>hexo-leancloud-counter-security</code>进行完善。<br>首先在<code>../next/_config.yml</code>主题配置文件中的<code>leancloud_visitors</code>找到<code>security</code>选项，将其改为<code>true</code>，同时确认同一配置文件下的<code>valine</code>部分的<code>enable</code>和<code>visitor</code>是<code>false</code>，因为这两者会产生冲突，如果使用<code>valine</code>作为评论系统，可以参照网上教程进行冲突解决。<br>然后在博客根目录下打开<code>git bash</code>或<code>CMD</code>，安装插件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-leancloud-counter-security --save</span><br></pre></td></tr></table></figure>
<p>由于插件存在依赖性，出现<code>Error: Cannot find module &#39;babel-runtime/regenerator&#39;</code>错误时需要再安装模块<code>babel-runtime</code>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install babel-runtime --save</span><br></pre></td></tr></table></figure>
<p>安装完成之后，注册用户，其中<code>用户名</code>和<code>密码</code>替换为你要设置的用户名和密码内容（不需要和LeanCloud的登陆名和登陆密码一样）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo lc-counter r 用户名 密码</span><br></pre></td></tr></table></figure>
<p>之后修改博客配置文件<code>../hexo/_config.yml</code>，添加以下内容（所有选项都必须填写，此处的<code>username</code>和<code>password</code>即刚刚注册的用户名和密码，网上有教程认为此处空白可等部署时输入，但我部署时会因为配置缺少导致出错，所以建议配置中直接写入），否则部署时会报错<code>TypeError: Cannot read property ‘enable_sync’ of undefined</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">leancloud_counter_security:</span></span><br><span class="line">  <span class="attr">enable_sync:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="string">&lt;&lt;your</span> <span class="string">app</span> <span class="string">id&gt;&gt;</span></span><br><span class="line">  <span class="attr">app_key:</span> <span class="string">&lt;&lt;your</span> <span class="string">app</span> <span class="string">key&gt;</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">&lt;&lt;your</span> <span class="string">username&gt;&gt;</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">&lt;&lt;your</span> <span class="string">password&gt;&gt;</span></span><br></pre></td></tr></table></figure>
<p>之后在同一配置文件下的<code>deploy</code>部分，做以下修改：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/username/username.github.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">leancloud_counter_security_sync</span></span><br></pre></td></tr></table></figure>
<p>由于搭建博客时已经部署到GitHub，要同时部署git和leancloud需要在配置文件中写清楚，其中git部分的<code>username</code>是对应博客的GitHub用户名，可参照我的博客<a href="https://linwhitehat.github.io/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html">搭建个人博客(hexo+next+github）</a>中的说明。<br>完成插件安装和配置修改后，到LeanCloud的应用中查看<code>存储</code>下的<code>_User</code>项，是否已经添加刚刚注册的用户，如图：<br><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/9.png" alt="LeanCloud用户查看"><i class="img-caption">☆ LeanCloud用户查看</i><br>存在用户后，查看<code>Counter</code>项，对表权限进行修改，点击<code>Counter</code>，选择<code>权限</code>，点击<code>修改</code>，分别修改<code>add_fields</code>、<code>create</code>和<code>delete</code>。<br><img src="/images/LeanCloud_Counter.png" alt="Counter权限修改"><i class="img-caption">☆ Counter权限修改</i><br><code>add_fields</code>和<code>create</code>两项的修改步骤一致：<br>1）选择<code>指定用户</code><br>2）输入已注册的用户名，添加<br><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/11.png" alt="添加用户"><i class="img-caption">☆ 添加用户</i><br>3）查看已添加用户正常显示<br><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/12.png" alt="用户添加成功效果"><i class="img-caption">☆ 用户添加成功效果</i><br>对于<code>delete</code>项，只保留上述第一个步骤即可，不需要添加用户。<br>如果希望保护访问数据不被篡改，可以选择<code>云引擎</code>，选择<code>部署</code>，选择<code>在线编辑</code>，点击<code>创建函数</code>，选项依次选择<code>Hook</code>、<code>beforeUpdate</code>和<code>Counter</code>，在函数中添加以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> query = <span class="keyword">new</span> AV.Query(<span class="string">"Counter"</span>);</span><br><span class="line"><span class="keyword">if</span> (request.object.updatedKeys.indexOf(<span class="string">'time'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> query.get(request.object.id).then(<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.get(<span class="string">"time"</span>) + <span class="number">1</span> !== request.object.get(<span class="string">"time"</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AV.Cloud.Error(<span class="string">'Invalid update!'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/18.png" alt="云引擎设置内容"><i class="img-caption">☆ 云引擎设置内容</i><br>保存上述设置之后，可看到添加的函数，点击<code>部署</code>，等待部署完成即可。<br><img src="https://raw.githubusercontent.com/lmnsyunhao/blog-pica/master/hexo-leancloud-plugin-installation-tutor/21.png" alt="部署完成日志"><i class="img-caption">☆ 部署完成日志</i></p>
<h4 id="修改lean-analytics-swig配置"><a href="#修改lean-analytics-swig配置" class="headerlink" title="修改lean-analytics.swig配置"></a>修改lean-analytics.swig配置</h4><p>如果上述配置完成后正常显示阅读数可跳过这部分，若出现阅读数不正常且显示为0，可参照此部分<sup id="fnref:10"><a href="#fn:10" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Next主题无法获取Leancloud阅读次数的问题](https://wangyi.blog/2019/12/24/Next主题无法获取Leancloud阅读次数的问题/)
">[10]</span></a></sup>，原因可能是LeanCloud接口出现变化。对<code>..\next\layout_third-party\statistics\lean-analytics.swig</code>做以下修改：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 修改第13行，-表示删除，+表示添加</span><br><span class="line"><span class="deletion">- Counter('get', `/classes/Counter?where=$&#123;JSON.stringify(&#123; url &#125;)&#125;`)</span></span><br><span class="line"><span class="addition">+ Counter('get', `/classes/Counter?where=$&#123;encodeURIComponent(JSON.stringify(&#123; url &#125;))&#125;&amp;limit=1`)</span></span><br><span class="line"></span><br><span class="line"># 修改第58行</span><br><span class="line"><span class="deletion">- Counter('get', `/classes/Counter?where=$&#123;JSON.stringify(&#123; url: &#123; '$in': entries &#125; &#125;)&#125;`)</span></span><br><span class="line"><span class="addition">+ Counter('get', `?where=$&#123;encodeURIComponent(JSON.stringify(&#123; url: &#123; '$in': entries &#125; &#125;))&#125;`)</span></span><br></pre></td></tr></table></figure>

<h3 id="设置中文缩进"><a href="#设置中文缩进" class="headerlink" title="设置中文缩进"></a>设置中文缩进</h3><p>中文撰写时习惯首行缩进，但是直接输入空格不能奏效，网上有教程可以设置自动缩进<code>2 em</code>，但是这样设置后还需要对不需要缩进的位置进行单独设置，同时自动缩进可能对排版不友好的文章不友好，可能在不该缩进的地方都给缩进了，所以我选择在写博文时手动在需要缩进的地方进行设置，即手动输入空格，此处将习惯的<code>space</code>即空格键输入换成<code>&amp;emsp;</code>或<code>&amp;#8195;</code>即可<sup id="fnref:11"><a href="#fn:11" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[markdown中实现首行缩进](https://blog.csdn.net/mountzf/article/details/51714763)
">[11]</span></a></sup>，输入两个即缩进两格，注意分号<code>;</code>不要漏掉，其他空格替换符如下：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">半方大的空白：   <span class="code">`&amp;ensp;`</span> or <span class="code">`&amp;#8194;`</span></span><br><span class="line">全方大的空白：   <span class="code">`&amp;emsp;`</span> or <span class="code">`&amp;#8195;`</span></span><br><span class="line">不断行的空白格： <span class="code">`&amp;nbsp;`</span> or <span class="code">`&amp;#160;`</span></span><br></pre></td></tr></table></figure>

<h3 id="静态代码压缩"><a href="#静态代码压缩" class="headerlink" title="静态代码压缩"></a>静态代码压缩</h3><p>为了让博客源码显得紧凑，也为了让网站加载速度变快，使用<code>gulp</code>对博客源码进行压缩。<sup id="fnref:12"><a href="#fn:12" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[gulp压缩源码](https://juejin.im/post/5dd2e898e51d45400206a466#heading-16)
">[12]</span></a></sup><br>1）安装<code>gulp</code>插件<br>安装<code>gulp</code>记得需要在全局环境下进行安装，不要只在博客根目录下的环境进行安装，否则会导致<code>gulp</code>无法正常执行。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install gulp --save  <span class="comment">#安装gulp</span></span><br></pre></td></tr></table></figure>
<p>2）安装功能模块<br>以下功能模块会在后续配置中使用，可以根据个人实际需要进行选择安装，一般建议<code>html</code>和<code>css</code>相关源码进行压缩，所以对应模块建议安装。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装功能模块</span></span><br><span class="line">npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify gulp-imagemin --save</span><br><span class="line"><span class="comment"># 额外的功能模块</span></span><br><span class="line">npm install gulp-debug gulp-clean-css gulp-changed gulp-if gulp-plumber gulp-babel babel-preset-env del --save</span><br></pre></td></tr></table></figure>
<p>3）<code>gulpfile.js</code>配置<br>在博客根目录<code>../hexo</code>新建文件<code>gulpfile.js</code>，添加以下配置信息，可根据自身需要进行修改：</p>
<details>
<summary>点击查看具体代码</summary>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">"gulp"</span>);</span><br><span class="line"><span class="keyword">var</span> debug = <span class="built_in">require</span>(<span class="string">"gulp-debug"</span>);</span><br><span class="line"><span class="keyword">var</span> cleancss = <span class="built_in">require</span>(<span class="string">"gulp-clean-css"</span>); <span class="comment">//css压缩组件</span></span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">"gulp-uglify"</span>); <span class="comment">//js压缩组件</span></span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">"gulp-htmlmin"</span>); <span class="comment">//html压缩组件</span></span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">"gulp-htmlclean"</span>); <span class="comment">//html清理组件</span></span><br><span class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">"gulp-imagemin"</span>); <span class="comment">//图片压缩组件</span></span><br><span class="line"><span class="keyword">var</span> changed = <span class="built_in">require</span>(<span class="string">"gulp-changed"</span>); <span class="comment">//文件更改校验组件</span></span><br><span class="line"><span class="keyword">var</span> gulpif = <span class="built_in">require</span>(<span class="string">"gulp-if"</span>); <span class="comment">//任务 帮助调用组件</span></span><br><span class="line"><span class="keyword">var</span> plumber = <span class="built_in">require</span>(<span class="string">"gulp-plumber"</span>); <span class="comment">//容错组件（发生错误不跳出任务，并报出错误内容）</span></span><br><span class="line"><span class="keyword">var</span> isScriptAll = <span class="literal">true</span>; <span class="comment">//是否处理所有文件，(true|处理所有文件)(false|只处理有更改的文件)</span></span><br><span class="line"><span class="keyword">var</span> isDebug = <span class="literal">true</span>; <span class="comment">//是否调试显示 编译通过的文件</span></span><br><span class="line"><span class="keyword">var</span> gulpBabel = <span class="built_in">require</span>(<span class="string">"gulp-babel"</span>);</span><br><span class="line"><span class="keyword">var</span> es2015Preset = <span class="built_in">require</span>(<span class="string">"babel-preset-es2015"</span>);</span><br><span class="line"><span class="keyword">var</span> del = <span class="built_in">require</span>(<span class="string">"del"</span>);</span><br><span class="line"><span class="keyword">var</span> Hexo = <span class="built_in">require</span>(<span class="string">"hexo"</span>);</span><br><span class="line"><span class="keyword">var</span> hexo = <span class="keyword">new</span> Hexo(process.cwd(), &#123;&#125;); <span class="comment">// 初始化一个hexo对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除public文件夹</span></span><br><span class="line">gulp.task(<span class="string">"clean"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> del([<span class="string">"public/**/*"</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面几个跟hexo有关的操作，主要通过hexo.call()去执行，注意return</span></span><br><span class="line"><span class="comment">// 创建静态页面 （等同 hexo generate）</span></span><br><span class="line">gulp.task(<span class="string">"generate"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> hexo.init().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> hexo</span><br><span class="line">      .call(<span class="string">"generate"</span>, &#123;</span><br><span class="line">        watch: <span class="literal">false</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hexo.exit();</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hexo.exit(err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动Hexo服务器</span></span><br><span class="line">gulp.task(<span class="string">"server"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> hexo</span><br><span class="line">    .init()</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> hexo.call(<span class="string">"server"</span>, &#123;&#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 部署到服务器</span></span><br><span class="line">gulp.task(<span class="string">"deploy"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> hexo.init().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> hexo</span><br><span class="line">      .call(<span class="string">"deploy"</span>, &#123;</span><br><span class="line">        watch: <span class="literal">false</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hexo.exit();</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hexo.exit(err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩public目录下的js文件</span></span><br><span class="line">gulp.task(<span class="string">"compressJs"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src([<span class="string">"./public/**/*.js"</span>, <span class="string">"!./public/libs/**"</span>]) <span class="comment">//排除的js</span></span><br><span class="line">    .pipe(gulpif(!isScriptAll, changed(<span class="string">"./public"</span>)))</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; <span class="attr">title</span>: <span class="string">"Compress JS:"</span> &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(</span><br><span class="line">      gulpBabel(&#123;</span><br><span class="line">        presets: [es2015Preset] <span class="comment">// es5检查机制</span></span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(uglify()) <span class="comment">//调用压缩组件方法uglify(),对合并的文件进行压缩</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">"./public"</span>)); <span class="comment">//输出到目标目录</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩public目录下的css文件</span></span><br><span class="line">gulp.task(<span class="string">"compressCss"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> option = &#123;</span><br><span class="line">    rebase: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//advanced: true,               //类型：Boolean 默认：true [是否开启高级优化（合并选择器等）]</span></span><br><span class="line">    compatibility: <span class="string">"ie7"</span> <span class="comment">//保留ie7及以下兼容写法 类型：String 默认：''or'*' [启用兼容模式； 'ie7'：IE7兼容模式，'ie8'：IE8兼容模式，'*'：IE9+兼容模式]</span></span><br><span class="line">    <span class="comment">//keepBreaks: true,             //类型：Boolean 默认：false [是否保留换行]</span></span><br><span class="line">    <span class="comment">//keepSpecialComments: '*'      //保留所有特殊前缀 当你用autoprefixer生成的浏览器前缀，如果不加这个参数，有可能将会删除你的部分前缀</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src([<span class="string">"./public/**/*.css"</span>, <span class="string">"!./public/**/*.min.css"</span>]) <span class="comment">//排除的css</span></span><br><span class="line">    .pipe(gulpif(!isScriptAll, changed(<span class="string">"./public"</span>)))</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; <span class="attr">title</span>: <span class="string">"Compress CSS:"</span> &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(cleancss(option))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">"./public"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩public目录下的html文件</span></span><br><span class="line">gulp.task(<span class="string">"compressHtml"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cleanOptions = &#123;</span><br><span class="line">    protect: <span class="regexp">/&lt;\!--%fooTemplate\b.*?%--&gt;/g</span>, <span class="comment">//忽略处理</span></span><br><span class="line">    unprotect: <span class="regexp">/&lt;script [^&gt;]*\btype="text\/x-handlebars-template"[\s\S]+?&lt;\/script&gt;/gi</span> <span class="comment">//特殊处理</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> minOption = &#123;</span><br><span class="line">    collapseWhitespace: <span class="literal">true</span>, <span class="comment">//压缩HTML</span></span><br><span class="line">    collapseBooleanAttributes: <span class="literal">true</span>, <span class="comment">//省略布尔属性的值  &lt;input checked="true"/&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">    removeEmptyAttributes: <span class="literal">true</span>, <span class="comment">//删除所有空格作属性值    &lt;input id="" /&gt; ==&gt; &lt;input /&gt;</span></span><br><span class="line">    removeScriptTypeAttributes: <span class="literal">true</span>, <span class="comment">//删除&lt;script&gt;的type="text/javascript"</span></span><br><span class="line">    removeStyleLinkTypeAttributes: <span class="literal">true</span>, <span class="comment">//删除&lt;style&gt;和&lt;link&gt;的type="text/css"</span></span><br><span class="line">    removeComments: <span class="literal">true</span>, <span class="comment">//清除HTML注释</span></span><br><span class="line">    minifyJS: <span class="literal">true</span>, <span class="comment">//压缩页面JS</span></span><br><span class="line">    minifyCSS: <span class="literal">true</span>, <span class="comment">//压缩页面CSS</span></span><br><span class="line">    minifyURLs: <span class="literal">true</span> <span class="comment">//替换页面URL</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">"./public/**/*.html"</span>)</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; <span class="attr">title</span>: <span class="string">"Compress HTML:"</span> &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(htmlclean(cleanOptions))</span><br><span class="line">    .pipe(htmlmin(minOption))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">"./public"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩 public/uploads 目录内图片</span></span><br><span class="line">gulp.task(<span class="string">"compressImage"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> option = &#123;</span><br><span class="line">    optimizationLevel: <span class="number">5</span>, <span class="comment">//类型：Number  默认：3  取值范围：0-7（优化等级）</span></span><br><span class="line">    progressive: <span class="literal">true</span>, <span class="comment">//类型：Boolean 默认：false 无损压缩jpg图片</span></span><br><span class="line">    interlaced: <span class="literal">false</span>, <span class="comment">//类型：Boolean 默认：false 隔行扫描gif进行渲染</span></span><br><span class="line">    multipass: <span class="literal">false</span> <span class="comment">//类型：Boolean 默认：false 多次优化svg直到完全优化</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> gulp</span><br><span class="line">    .src(<span class="string">"./public/medias/**/*.*"</span>)</span><br><span class="line">    .pipe(gulpif(!isScriptAll, changed(<span class="string">"./public/medias"</span>)))</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; <span class="attr">title</span>: <span class="string">"Compress Images:"</span> &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(imagemin(option))</span><br><span class="line">    .pipe(gulp.dest(<span class="string">"./public"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 执行顺序： 清除public目录 -&gt; 产生原始博客内容 -&gt; 执行压缩混淆 -&gt; 部署到服务器</span></span><br><span class="line">gulp.task(</span><br><span class="line">  <span class="string">"build"</span>,</span><br><span class="line">  gulp.series(</span><br><span class="line">    <span class="string">"clean"</span>,</span><br><span class="line">    <span class="string">"generate"</span>,</span><br><span class="line">    <span class="string">"compressHtml"</span>,</span><br><span class="line">    <span class="string">"compressCss"</span>,</span><br><span class="line">    <span class="string">"compressJs"</span>,</span><br><span class="line">    <span class="string">"compressImage"</span>,</span><br><span class="line">    gulp.parallel(<span class="string">"deploy"</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认任务</span></span><br><span class="line">gulp.task(</span><br><span class="line">  <span class="string">"default"</span>,</span><br><span class="line">  gulp.series(</span><br><span class="line">    <span class="string">"clean"</span>,</span><br><span class="line">    <span class="string">"generate"</span>,</span><br><span class="line">    gulp.parallel(<span class="string">"compressHtml"</span>, <span class="string">"compressCss"</span>, <span class="string">"compressImage"</span>, <span class="string">"compressJs"</span>)</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</details>
4）部署
完成配置修改后，在博客根目录下打开`git bash`，按照[配置修改后更新部署即可](#Update)。

<h3 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h3><p>在<code>Next.Mist</code>主题下，友情链接默认显示在<code>站点概览</code>下方，在主题配置文件<code>../next/_config.yml</code>中找到<code>Blog rolls</code>设置块，其中<code>links_settings</code>是对友链的样式进行配置，<code>links</code>下按照以下格式添加即可添加友情链接：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">林深时见璐:</span> <span class="string">https://linwhitehat.github.io/</span></span><br></pre></td></tr></table></figure>

<h3 id="添加音乐"><a href="#添加音乐" class="headerlink" title="添加音乐"></a>添加音乐</h3><p>在分享博客时，一些文艺类型的博客可能适合添加背景音乐，既烘托文章意蕴，也让阅读者能欣赏雅乐。博客撰写是使用markdown，而markdown对html语法的支持是天然的，而为了在博客中样式更为美观，需要使用css进行一定设置，更多样式可参照此博客<sup id="fnref:13"><a href="#fn:13" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[markdown插入音频](https://yuanlichenai.cn/2019/03/03/music/)
">[13]</span></a></sup><sup id="fnref:14"><a href="#fn:14" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[博客插入音频](https://zenreal.github.io/posts/61856/)
">[14]</span></a></sup>，博文中直接写入以下代码（外链不可生成情况可能无法播放）：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">iframe</span> </span><br><span class="line">    frameborder="no" border="0" marginwidth="0" </span><br><span class="line">    marginheight="0" width=330 height=86 </span><br><span class="line">    src="//music.163.com/outchain/player?type=2&amp;id=461544312&amp;auto=0&amp;height=66"&gt;</span><br><span class="line">&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<iframe 
    frameborder="no" border="0" marginwidth="0" 
    marginheight="0" width=330 height=86 
    src="//music.163.com/outchain/player?type=2&id=461544312&auto=0&height=66">
</iframe>

<h2 id="自定义设计思路"><a href="#自定义设计思路" class="headerlink" title="自定义设计思路"></a>自定义设计思路</h2><p>在<code>../hexo/source/_data/</code>目录下可以自建自定义样式文件，在<code>../next/_config.yml</code>主题配置文件中<code>custom_file_path</code>即对应自定义配置文件信息，而调试的过程可以在浏览器的开发者模式下进行调试<sup id="fnref:15"><a href="#fn:15" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[学会使用浏览器F12定位样式](https://bestzuo.cn/posts/blog-establish.html#%E5%AD%A6%E4%BC%9A%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8F12%E5%AE%9A%E4%BD%8D%E6%A0%B7%E5%BC%8F)
">[15]</span></a></sup>。</p>
<h3 id="自定义站点LOGO"><a href="#自定义站点LOGO" class="headerlink" title="自定义站点LOGO"></a>自定义站点LOGO</h3><p>默认的Hexo博客使用的是Hexo的Logo，在chrome浏览器访问博客时，标签页的图标即默认Logo，而Hexo博客本身支持使用自定义的图标，修改站点Logo步骤如下：</p>
<ol>
<li>选取合适的图片，制作favicon图标，使用<a href="http://www.bitbug.net/" target="_blank" rel="noopener external nofollow noreferrer">比特虫</a><sup id="fnref:16"><a href="#fn:16" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[自定义博客图标](https://wangxiaoyu-go.github.io/2018/11/18/change-theme-favicon/)
">[16]</span></a></sup>生成<code>ico</code>格式文件；</li>
<li>存储自定义的<code>ico</code>图片文件到<code>../next/source/images</code>目录下；</li>
<li>修改博客主题配置文件<code>../next/_config.yml</code>，找到<code>favicon</code>选项，修改如下：</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">medium:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line"><span class="string">+</span> <span class="attr">small:</span> <span class="string">/images/new-favicon-16x16.ico</span></span><br><span class="line"><span class="string">+</span> <span class="attr">medium:</span> <span class="string">/images/new-favicon-32x32.ico</span></span><br></pre></td></tr></table></figure>

<h3 id="自定义404"><a href="#自定义404" class="headerlink" title="自定义404"></a>自定义404</h3><p>在主题配置文件中添加<code>404</code>页面，有两种方式添加<code>404</code>页面，一种是基于markdown解析，一种是基于html解析，网络教程还提供更多<code>javascript</code>及<code>css</code>样式进行自定义，使页面更加美观，可参照<sup id="fnref:17"><a href="#fn:17" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Hexo+Next个人博客主题优化](https://www.jianshu.com/p/efbeddc5eb19)
">[17]</span></a></sup><sup id="fnref:18"><a href="#fn:18" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[next主题下添加404页面](https://blog.yleao.com/2018/0901/hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8B%E7%9A%84%E7%BE%8E%E5%8C%96.html#next%E4%B8%BB%E9%A2%98%E4%B8%8B%E6%B7%BB%E5%8A%A0404%E9%A1%B5%E9%9D%A2)
">[18]</span></a></sup><sup id="fnref:19"><a href="#fn:19" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Hexo-框架下404页面的设置](https://zejinwang.com/2019/06/25/Hexo-%E6%A1%86%E6%9E%B6%E4%B8%8B404%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%AE%BE%E7%BD%AE/)
">[19]</span></a></sup>。</p>
<ol>
<li>markdown解析<br>与生成<code>归档</code>、<code>分类</code>的方法相同，可以在主题配置文件<code>../next/_config.yml</code>中找到<code>menu</code>，添加：<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">commonweal:</span> <span class="string">/404/</span> <span class="string">||</span> <span class="string">heartbeat</span></span><br></pre></td></tr></table></figure>
在<code>../hexo/source/</code>目录下新建<code>404</code>目录，目录下新建<code>index.md</code>，或者在博客根目录打开<code>git bash</code>，执行：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page <span class="string">"404"</span></span><br></pre></td></tr></table></figure>
在<code>../source/404/index.md</code>中添加以下内容：<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 404 Not Found：该页无法显示</span><br><span class="line">toc: false</span><br><span class="line">comments: false</span><br><span class="line">permalink: /404</span><br><span class="line">---</span><br><span class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;head&gt;</span></span><br><span class="line"><span class="code">         &lt;meta charset="UTF-8" /&gt;</span></span><br><span class="line"><span class="code">         &lt;title&gt;404&lt;/title&gt;                                                                                                                                        </span></span><br><span class="line"><span class="code">    &lt;/head&gt;</span></span><br><span class="line"><span class="code">    &lt;body&gt;</span></span><br><span class="line"><span class="code">         &lt;script type="text/javascript" src="//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js" homePageName="返回首页" homePageUrl="https://www.nickyam.com"&gt;&lt;/script&gt;</span></span><br><span class="line">true<span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li><span id="404">html解析</span><br>不使用默认的<code>markdown</code>解析404页面，而是自定义一个独立页面，使用腾讯公益作为<code>404</code>页面内容，同时加上<code>返回博客</code>字样及跳转。<br>在<code>hexo/source/</code>下新建<code>404.html</code>，需要避免markdown渲染，在<code>404.html</code>开头加上<code>layout: false</code>，html内容如下:<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">layout: false</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>404<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> <span class="attr">homePageUrl</span>=<span class="string">"/"</span> <span class="attr">homePageName</span>=<span class="string">"返回博客"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="自定义字体"><a href="#自定义字体" class="headerlink" title="自定义字体"></a>自定义字体</h3><h4 id="字体默认配置"><a href="#字体默认配置" class="headerlink" title="字体默认配置"></a>字体默认配置</h4><p>博客默认的字体可能看起来不美观，可以在博客主题配置相关文件<code>../next/source/css/_variables/base.styl</code>中查看默认的字体配置信息如下:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$font-family-chinese      &#x3D; &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;;</span><br><span class="line"></span><br><span class="line">$font-family-base         &#x3D; $font-family-chinese, sans-serif;</span><br><span class="line">$font-family-base         &#x3D; get_font_family(&#39;global&#39;), $font-family-chinese, sans-serif if get_font_family(&#39;global&#39;);</span><br><span class="line"></span><br><span class="line">$font-family-logo         &#x3D; $font-family-base;</span><br><span class="line">$font-family-logo         &#x3D; get_font_family(&#39;title&#39;), $font-family-base if get_font_family(&#39;title&#39;);</span><br><span class="line"></span><br><span class="line">$font-family-headings     &#x3D; $font-family-base;</span><br><span class="line">$font-family-headings     &#x3D; get_font_family(&#39;headings&#39;), $font-family-base if get_font_family(&#39;headings&#39;);</span><br><span class="line"></span><br><span class="line">$font-family-posts        &#x3D; $font-family-base;</span><br><span class="line">$font-family-posts        &#x3D; get_font_family(&#39;posts&#39;), $font-family-base if get_font_family(&#39;posts&#39;);</span><br><span class="line"></span><br><span class="line">$font-family-monospace    &#x3D; consolas, Menlo, monospace, $font-family-chinese;</span><br><span class="line">$font-family-monospace    &#x3D; get_font_family(&#39;codes&#39;), consolas, Menlo, monospace, $font-family-chinese if get_font_family(&#39;codes&#39;);</span><br><span class="line"></span><br><span class="line">$font-family-icons        &#x3D; &#39;FontAwesome&#39;;</span><br></pre></td></tr></table></figure>

<h4 id="使用Googlr-Fonts字体"><a href="#使用Googlr-Fonts字体" class="headerlink" title="使用Googlr Fonts字体"></a>使用Googlr Fonts字体</h4><p>通过在线加载字体的方式实现博客字体自定义（也可以选择本地字体，可见网上教程），<a href="https://fonts.google.com/" target="_blank" rel="noopener external nofollow noreferrer">Google Fonts</a>提供的英文字体质量很高，同时近几年也开始提供多种中文字体（也有其他语言字体），尽管样式有限，但是质量还是不错的。Next主题中带有字体修改配置，在主题配置文件<code>../next/_config.yml</code>中找到<code>font</code>，可看到默认设置：</p>
<details>
<summary>点击查看具体代码</summary>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="comment"># Use custom fonts families or not.</span></span><br><span class="line">  <span class="comment"># Depended options: `external` and `family`.</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host, e.g. //fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Lato</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for site title (.site-title).</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts (.post-body).</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br></pre></td></tr></table></figure>
</details>
修改配置步骤如下:
1. 将`enable`选项修改为`true`，`host`可修改为国内镜像`fonts.loli.net`；
2. `global`、`title`、`posts`等选项是对具体项的字体设置，建议参考以下设置：

<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="bullet">- </span>global: 网站全局字体设置，建议填写英文字体</span><br><span class="line"><span class="bullet">- </span>其他类型可根据个人喜好</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>设置博客中文字体</li>
</ol>
<p>在<code>../next/source/css/_variables/base.styl</code>中修改默认中文字体，例如我选择中文字体为<code>Noto Serif SC</code>，修改如下：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">// Font families.</span><br><span class="line"><span class="deletion">-$font-family-chinese      = "PingFang SC", "Microsoft YaHei"</span></span><br><span class="line"><span class="addition">+$font-family-chinese      = "Noto Serif SC", "PingFang SC", "Microsoft YaHei"</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>加载字体设置</li>
</ol>
<p>在博客中载入设置的字体，在自定义文件<code>../hexo/source/_data/head.swig</code>中加入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;link href&#x3D;&quot;https:&#x2F;&#x2F;fonts.googleapis.com&#x2F;css?family&#x3D;Noto+Serif+SC:400,500,700&amp;display&#x3D;swap&amp;subset&#x3D;chinese-simplified&quot; rel&#x3D;&quot;stylesheet&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>加入的<code>&lt;link&gt;</code>标签内容在Google Fonts中生成，选中一款字体后，点<code>+</code>号选择，在底部会有一个选项框，点击一下会弹出字体设置框，点击<code>CUSTOMIZE</code>，对字体进行自定义设置，然后在<code>EMBED</code>中可以看到自动生成的<code>&lt;link&gt;</code>代码，将其添加到上述对应位置，其中域名<code>fonts.googleapis.com</code>可修改为国内镜像域名<code>fonts.loli.net</code>。</p>
<h3 id="自定义超链接样式"><a href="#自定义超链接样式" class="headerlink" title="自定义超链接样式"></a>自定义超链接样式</h3><p>在自定义样式文件<code>../hexo/source/_data/styles.styl</code>中添加以下内容，主要是颜色和下划线的设置，其他可以根据个人喜欢修改（颜色可参照<a href="https://tool.oschina.net/commons?type=3" target="_blank" rel="noopener external nofollow noreferrer">RGB</a>）<sup id="fnref:20"><a href="#fn:20" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[CSS样式美化](https://www.libinx.com/2017/2017-03-12-hexo-next-beautify/)
">[20]</span></a></sup>：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 超链接样式</span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">32</span>, <span class="number">178</span>, <span class="number">170</span>);</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      <span class="selector-tag">color</span>: <span class="selector-tag">rgb</span>(30, 144, 255);</span><br><span class="line">      <span class="selector-tag">text-decoration</span>: <span class="selector-tag">underline</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> <span class="selector-tag">a</span>, <span class="selector-class">.post-copyright</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      <span class="selector-tag">color</span>: <span class="selector-tag">rgb</span>(30, 144, 255);</span><br><span class="line">      <span class="selector-tag">text-decoration</span>: <span class="selector-tag">underline</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">30</span>, <span class="number">144</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">30</span>, <span class="number">144</span>, <span class="number">255</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义独立页面"><a href="#自定义独立页面" class="headerlink" title="自定义独立页面"></a>自定义独立页面</h3><p>相信在<a href="#404">404</a>页面部分，已经初步了解了独立页面的设计，在博客中可以自定义设计很多独立页面，可以加上自定义的css样式和javascript脚本渲染，比如加入相册、视频等，而要做到独立站点且渲染效果和自己设计的一致，最重要的是<code>避免博客默认的markdown渲染</code><sup id="fnref:21"><a href="#fn:21" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[hexo创建404页面](http://www.xnian.top/2017/11/21/hexo%E5%88%9B%E5%BB%BA404%E9%A1%B5%E9%9D%A2/)
">[21]</span></a></sup><sup id="fnref:22"><a href="#fn:22" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[在 Hexo 博客中创建自定义页面](https://www.dazhuanlan.com/2019/10/24/5db1ac54ce05b/)">[22]</span></a></sup>。避免渲染的方式有很多，网上教程会介绍在html页面起始加上<code>layout: false</code>，但我更推荐另一种方法即<code>skip_render</code>参数设置，这种方法合适各种不需要博客默认解析的配置文件，具体操作是在博客根目录的配置文件<code>../hexo/_config.yml</code>找到<code>skip_render</code>，做出以下修改，<code>DIY_folder</code>即自定义独立页面所在文件夹，<code>**</code>表示该文件夹下所有文件：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> <span class="string">[README.md,DIY_folder/**]</span></span><br></pre></td></tr></table></figure>

<h3 id="配置修改后更新部署"><a href="#配置修改后更新部署" class="headerlink" title="配置修改后更新部署"></a><span id="Update">配置修改后更新部署</span></h3><p>输入以下命令完成每次更新：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean <span class="comment"># 涉及配置文件修改</span></span><br><span class="line">hexo g</span><br><span class="line">gulp</span><br><span class="line">gulp build</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>这篇博客基于hexo和next初始配置完成的情况对博客进行主题功能和外观的优化，撰写初衷是将自身搭建博客进行记录，因为Hexo主题更新频繁，不同版本之间的配置处理并不完全一致，根据已有的参考需要进行实际优化处理，同时也对Hexo结构了解更深刻，希望将来能更多的自定义实现渲染效果的设计，搭建更自主化的博客。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.jianshu.com/p/78c218f9d1e7" target="_blank" rel="noopener external nofollow noreferrer">设置阅读全文</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="noopener external nofollow noreferrer">分类二级目录</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://wangjiezhe.com/posts/2018-10-29-Hexo-NexT-3/" target="_blank" rel="noopener external nofollow noreferrer">评论系统</a><a href="#fnref:3" rev="footnote"> ↩</a></span></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.singee.me/2017/12/07/mist-img-center/" target="_blank" rel="noopener external nofollow noreferrer">图片居中设置</a><a href="#fnref:4" rev="footnote"> ↩</a></span></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://guanqr.com/study/blog/hexo-theme-next-customization/" target="_blank" rel="noopener">插入脚注</a><a href="#fnref:5" rev="footnote"> ↩</a></span></li><li id="fn:6"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">6.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://benzblog.site/2019-07-12-HexoTricks/" target="_blank" rel="noopener external nofollow noreferrer">注脚选择</a><a href="#fnref:6" rev="footnote"> ↩</a></span></li><li id="fn:7"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">7.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.bill.moe/hexo-theme-next-config-optimization/" target="_blank" rel="noopener external nofollow noreferrer">分割线样式修改</a><a href="#fnref:7" rev="footnote"> ↩</a></span></li><li id="fn:8"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">8.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="http://eternalzttz.com/hexo-next.html" target="_blank" rel="noopener external nofollow noreferrer">页脚显示博客运行时间</a><a href="#fnref:8" rev="footnote"> ↩</a></span></li><li id="fn:9"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">9.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://yunhao.space/2018/06/27/hexo-leancloud-plugin-installation-tutor/" target="_blank" rel="noopener">部署LeanCloud显示阅读数量</a><a href="#fnref:9" rev="footnote"> ↩</a></span></li><li id="fn:10"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">10.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://wangyi.blog/2019/12/24/Next%E4%B8%BB%E9%A2%98%E6%97%A0%E6%B3%95%E8%8E%B7%E5%8F%96Leancloud%E9%98%85%E8%AF%BB%E6%AC%A1%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener external nofollow noreferrer">Next主题无法获取Leancloud阅读次数的问题</a><a href="#fnref:10" rev="footnote"> ↩</a></span></li><li id="fn:11"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">11.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.csdn.net/mountzf/article/details/51714763" target="_blank" rel="noopener external nofollow noreferrer">markdown中实现首行缩进</a><a href="#fnref:11" rev="footnote"> ↩</a></span></li><li id="fn:12"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">12.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://juejin.im/post/5dd2e898e51d45400206a466#heading-16" target="_blank" rel="noopener external nofollow noreferrer">gulp压缩源码</a><a href="#fnref:12" rev="footnote"> ↩</a></span></li><li id="fn:13"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">13.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://yuanlichenai.cn/2019/03/03/music/" target="_blank" rel="noopener external nofollow noreferrer">markdown插入音频</a><a href="#fnref:13" rev="footnote"> ↩</a></span></li><li id="fn:14"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">14.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://zenreal.github.io/posts/61856/" target="_blank" rel="noopener external nofollow noreferrer">博客插入音频</a><a href="#fnref:14" rev="footnote"> ↩</a></span></li><li id="fn:15"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">15.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://bestzuo.cn/posts/blog-establish.html#%E5%AD%A6%E4%BC%9A%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8F12%E5%AE%9A%E4%BD%8D%E6%A0%B7%E5%BC%8F" target="_blank" rel="noopener">学会使用浏览器F12定位样式</a><a href="#fnref:15" rev="footnote"> ↩</a></span></li><li id="fn:16"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">16.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://wangxiaoyu-go.github.io/2018/11/18/change-theme-favicon/" target="_blank" rel="noopener external nofollow noreferrer">自定义博客图标</a><a href="#fnref:16" rev="footnote"> ↩</a></span></li><li id="fn:17"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">17.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.jianshu.com/p/efbeddc5eb19" target="_blank" rel="noopener external nofollow noreferrer">Hexo+Next个人博客主题优化</a><a href="#fnref:17" rev="footnote"> ↩</a></span></li><li id="fn:18"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">18.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://blog.yleao.com/2018/0901/hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8B%E7%9A%84%E7%BE%8E%E5%8C%96.html#next%E4%B8%BB%E9%A2%98%E4%B8%8B%E6%B7%BB%E5%8A%A0404%E9%A1%B5%E9%9D%A2" target="_blank" rel="noopener external nofollow noreferrer">next主题下添加404页面</a><a href="#fnref:18" rev="footnote"> ↩</a></span></li><li id="fn:19"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">19.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://zejinwang.com/2019/06/25/Hexo-%E6%A1%86%E6%9E%B6%E4%B8%8B404%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%AE%BE%E7%BD%AE/" target="_blank" rel="noopener external nofollow noreferrer">Hexo-框架下404页面的设置</a><a href="#fnref:19" rev="footnote"> ↩</a></span></li><li id="fn:20"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">20.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.libinx.com/2017/2017-03-12-hexo-next-beautify/" target="_blank" rel="noopener external nofollow noreferrer">CSS样式美化</a><a href="#fnref:20" rev="footnote"> ↩</a></span></li><li id="fn:21"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">21.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="http://www.xnian.top/2017/11/21/hexo%E5%88%9B%E5%BB%BA404%E9%A1%B5%E9%9D%A2/" target="_blank" rel="noopener external nofollow noreferrer">hexo创建404页面</a><a href="#fnref:21" rev="footnote"> ↩</a></span></li><li id="fn:22"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">22.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.dazhuanlan.com/2019/10/24/5db1ac54ce05b/" target="_blank" rel="noopener external nofollow noreferrer">在 Hexo 博客中创建自定义页面</a><a href="#fnref:22" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      <categories>
        <category>技术分享</category>
        <category>博客</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
        <tag>Mist</tag>
      </tags>
  </entry>
  <entry>
    <title>微软系统使用手册</title>
    <url>/%E5%BE%AE%E8%BD%AF%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>微软操作系统占据绝对的市场，也是大部分人使用最多的PC操作系统，本文列述了各类Windows系统使用中的说明，能够让你对Windows了解更多，使用起来更加得心应手。</p>
<a id="more"></a>
<h2 id="录屏"><a href="#录屏" class="headerlink" title="录屏"></a>录屏</h2><p>Windows10系统中预装了Xbox系列软件，这本身是微软的一共游戏娱乐平台，但是其带有的录屏功能却能够满足我们录制教程或远程会议视频，不需要安装第三方的应用软件，而且使用十分简单方便。</p>
<h3 id="开启Windows录屏设置"><a href="#开启Windows录屏设置" class="headerlink" title="开启Windows录屏设置"></a>开启Windows录屏设置</h3><p>Windows10点击菜单栏<code>Windows</code>键，进入<code>系统设置</code>；<br><img src="/images/windows-1.png" alt="系统设置"><i class="img-caption">☆ 系统设置</i><br>选择<code>游戏</code>，点击左侧<code>游戏栏</code>，将<code>使用游戏录制游戏剪辑 、屏蔽截图和广播</code>选择为<code>开</code>，下方打开游戏栏快捷键按照系统默认为<code>Win+G</code>；<br><img src="/images/windows-2.png" alt="游戏设置"><i class="img-caption">☆ 游戏设置</i><br><img src="/images/windows-3.png" alt="游戏栏设置"><i class="img-caption">☆ 游戏栏设置</i><br>点击左侧的<code>游戏模式</code>,选择为<code>开</code>，这样才能够开启Xbox的录屏功能；<br><img src="/images/windows-4.png" alt="游戏模式设置"><i class="img-caption">☆ 游戏模式设置</i><br>然后选择左侧的<code>屏幕截图</code>,将<code>当我玩游戏时在后台录制</code>和<code>在我录制游戏时录制音频</code>选择为<code>开</code>，其他选项可以根据自身情况设置。<br><img src="/images/windows-5.png" alt="录制设置"><i class="img-caption">☆ 录制设置</i></p>
<h3 id="录制屏幕"><a href="#录制屏幕" class="headerlink" title="录制屏幕"></a>录制屏幕</h3><p>在需要录制的时候，按下之前设置的快捷键<code>Win + G</code>，此时会弹出Xbox录制窗口，<code>游戏捕获</code>窗口是操作按钮，<code>音频</code>窗口是设置需要录制音频的应用，点击<code>游戏捕获</code>下的<code>⚫</code>按钮即开始录制；<br><img src="/images/windows-6.png" alt="录制屏幕"><i class="img-caption">☆ 录制屏幕</i></p>
<h3 id="查看录制结果及修改录制设置"><a href="#查看录制结果及修改录制设置" class="headerlink" title="查看录制结果及修改录制设置"></a>查看录制结果及修改录制设置</h3><p>在需要结束录制的时候，按下录制窗口上的<code>⬛</code>按钮或屏幕右上角的<code>⬛</code>按钮，同时可以看到录制的时长，结束录制时系统会通知你录制内容存储位置，到存储位置查看已录制的视频。点击录制窗口的<code>⚙</code>状按钮可以修改录制设置，旁边的<code>📂</code>可以查看存储位置。<br><img src="/images/windows-7.png" alt="结束录制"><i class="img-caption">☆ 结束录制</i></p>
<h2 id="已存储Wi-Fi密码查看"><a href="#已存储Wi-Fi密码查看" class="headerlink" title="已存储Wi-Fi密码查看"></a>已存储Wi-Fi密码查看</h2><h3 id="打开网络适配器设置"><a href="#打开网络适配器设置" class="headerlink" title="打开网络适配器设置"></a>打开网络适配器设置</h3><h4 id="命令行开启"><a href="#命令行开启" class="headerlink" title="命令行开启"></a>命令行开启</h4><p>按快捷组合键<code>Windwos+r</code>，输入<code>ncpa.cpl</code>。</p>
<h4 id="界面鼠标开启"><a href="#界面鼠标开启" class="headerlink" title="界面鼠标开启"></a>界面鼠标开启</h4><p>鼠标右键点击Windows菜单栏的网络图标，点击<code>打开“网络和Internet”设置</code>，选择<code>更改适配器选项</code>。</p>
<p><img src="/images/windows-8.png" alt="网络适配器"><i class="img-caption">☆ 网络适配器</i></p>
<h3 id="查看无线网配置信息"><a href="#查看无线网配置信息" class="headerlink" title="查看无线网配置信息"></a>查看无线网配置信息</h3><h4 id="无线网状态"><a href="#无线网状态" class="headerlink" title="无线网状态"></a>无线网状态</h4><p>右键点击<code>WLAN</code>标记的网络，点击<code>状态</code>。</p>
<p><img src="/images/windows-9.png" alt="无线状态查看"><i class="img-caption">☆ 无线状态查看</i></p>
<h4 id="查看无线属性"><a href="#查看无线属性" class="headerlink" title="查看无线属性"></a>查看无线属性</h4><p>进入无线网状态界面，点击<code>无线属性</code>,选择<code>安全</code>选项卡，勾选<code>显示字符</code>即可查看当前无线网的认证信息。</p>
<p><img src="/images/windows-10.png" alt="无线属性查看"><i class="img-caption">☆ 无线属性查看</i></p>
<p><img src="/images/windows-11.png" alt="Wi-Fi密钥查看"><i class="img-caption">☆ Wi-Fi密钥查看</i></p>
<h2 id="端口占用查看"><a href="#端口占用查看" class="headerlink" title="端口占用查看"></a>端口占用查看</h2><p>在windows下需要查看端口占用情况，同时排查哪些应用正在使用当前端口<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Windows下如何查看某个端口被谁占用](https://www.runoob.com/w3cnote/windows-finds-port-usage.html)
">[1]</span></a></sup>。</p>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><h4 id="打开命令行（管理员身份）"><a href="#打开命令行（管理员身份）" class="headerlink" title="打开命令行（管理员身份）"></a>打开命令行（管理员身份）</h4><p>1） 在开始菜单搜索<code>cmd</code>，右键点击<code>命令行提示窗口</code>以管理员身份运行；</p>
<p>2） 按快捷组合键<code>Windows+r</code>，输入<code>cmd</code>。</p>
<h4 id="查看所有端口"><a href="#查看所有端口" class="headerlink" title="查看所有端口"></a>查看所有端口</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure>
<p>每个地址后面显示的即端口号，最后一列表示对应的进程号PID。</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530674518-5109-2159693-5342695777bde48d.png" alt="系统所有端口信息查看"><i class="img-caption">☆ 系统所有端口信息查看</i></p>
<h4 id="查看具体端口使用的进程"><a href="#查看具体端口使用的进程" class="headerlink" title="查看具体端口使用的进程"></a>查看具体端口使用的进程</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -aon|findstr <span class="string">"8081"</span></span><br></pre></td></tr></table></figure>
<p>显示使用当前端口的进程情况。</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530674518-6203-2159693-10d9bae7a6e59b06.png" alt="端口对应使用进程查看"><i class="img-caption">☆ 端口对应使用进程查看</i></p>
<h4 id="查看指定进程"><a href="#查看指定进程" class="headerlink" title="查看指定进程"></a>查看指定进程</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tasklist|findstr <span class="string">"9088"</span></span><br></pre></td></tr></table></figure>
<p>查看是哪个进程或者程序占用了 8081 端口，结果是：node.exe。</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2018/07/1530674518-3794-2159693-30d1a50103f28cea.png" alt="查看具体进程"><i class="img-caption">☆ 查看具体进程</i></p>
<h2 id="内存型号查看"><a href="#内存型号查看" class="headerlink" title="内存型号查看"></a>内存型号查看</h2><p>使用Windows系统的电脑一般都能支持扩展，而扩展的硬件一般都有内存，要给电脑增加内存条需要知道电脑对内存的支持情况以及内存条的配置，有多种方式能够得知，这里仍然推荐不适用第三方软件的方式，即Windows自身便能完成需求。</p>
<h3 id="查看支持的最大内存容量"><a href="#查看支持的最大内存容量" class="headerlink" title="查看支持的最大内存容量"></a>查看支持的最大内存容量</h3><p>打开命令行，按下<code>Win + R</code>，输入<code>cmd</code>，输入<code>wmic memphysical get maxcapacity</code>，显示的数字即电脑主板支持的最大内存，这串数字的单位是<code>KB</code>，因此需要换算为<code>GB</code>，以我的笔记本为例子16777216KB即16GB。<br><img src="/images/windows-12.png" alt="支持内存上限"><i class="img-caption">☆ 支持内存上限</i></p>
<h3 id="查看内存配置"><a href="#查看内存配置" class="headerlink" title="查看内存配置"></a>查看内存配置</h3><p>一般购买内存需要知道内存的型号、频率、电压、大小，其中内存条的型号、频率和电压是必须和电脑主板支持的相兼容才能保证使用正常，详细的内存配置可以参照此处<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[读懂内存](https://zhuanlan.zhihu.com/p/26255460)
">[2]</span></a></sup><sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[英睿达](https://www.crucial.cn/memory)
">[3]</span></a></sup>，具体查看步骤如下：</p>
<ol>
<li>打开命令行，输入<code>wmic</code>，在wmic提示符下输入<code>memorychip</code>，可看到当前电脑内存信息。<br><img src="/images/windows-13.png" alt="内存信息"><i class="img-caption">☆ 内存信息</i></li>
<li>解读显示的内存信息，<code>Capacity</code>表示内存大小，<code>ConfiguredClockSpeed</code>表示内存频率，<code>DataWidth</code>表示位宽，其中要判断型号是<code>DDR</code>的哪个版本，从频率可以判断，一般频率在2400以上的即<code>DDR4</code>，这也是当前最常见的内存型号，如果要直观查看，可以使用第三方软件<code>cpu-z</code>查看。</li>
</ol>
<h2 id="常见问题-amp-解决方法"><a href="#常见问题-amp-解决方法" class="headerlink" title="常见问题&amp;解决方法"></a>常见问题&amp;解决方法</h2><h3 id="浏览器如chrome无法正常播放声音"><a href="#浏览器如chrome无法正常播放声音" class="headerlink" title="浏览器如chrome无法正常播放声音"></a>浏览器如chrome无法正常播放声音</h3><p>问题：<br>&emsp;&emsp;当使用网易云音乐、QQ、影视播放软件等软件可以正常播放声音，而常用浏览器却不能播放声音，重启仍然无效时，问题一般是浏览器的声音播放被禁止了，即针对性的对某个应用做了声音禁止。<br>解决：<br>&emsp;&emsp;解决办法即查看系统<code>声音设置</code>以及<code>声音合成器</code>，在桌面右下角菜单栏找到<code>🔈</code>形状的<code>扬声器</code>，右键点击可以看到选项，查看浏览器是否被禁音，将其解除即可。<br><img src="/images/windows-14.png" alt="扬声器"><i class="img-caption">☆ 扬声器</i><br><img src="/images/windows-15.png" alt="扬声器设置"><i class="img-caption">☆ 扬声器设置</i></p>
<h2 id="推荐工具"><a href="#推荐工具" class="headerlink" title="推荐工具"></a>推荐工具</h2><h3 id="PanDownload"><a href="#PanDownload" class="headerlink" title="PanDownload"></a>PanDownload</h3><p>解决百度云带来的限速问题，这是免费的一款第三方下载软件，请不要有偿售卖，同时请谨慎使用，存在被封的风险。详情见官网<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[PanDownload](https://pandownload.com/index.html)
">[4]</span></a></sup>。</p>
<h3 id="CMD-下载百度云资源"><a href="#CMD-下载百度云资源" class="headerlink" title="CMD-下载百度云资源"></a>CMD-下载百度云资源</h3><p>PanDownload作者于2018年宣布不再维护和开放服务，因此网页版PanDownload不可用，客户端目前不受影响，而同时作者提出另一种绕过百度云客户端限速的方法即通过<code>CMD</code>进行下载，转载来到本博客，详情参照作者博客<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[BaiduPCS-Go 使用CMD命令行全速下载百度云](https://laod.cn/black-technology/baidupcs-go-baiduyun.html)">[5]</span></a></sup>。</p>
<h3 id="Html-JS压缩及还原"><a href="#Html-JS压缩及还原" class="headerlink" title="Html/JS压缩及还原"></a>Html/JS压缩及还原</h3><p>经过压缩的源码想再编辑时需要还原为原来的形式，使用<a href="https://tool.lu/html/" target="_blank" rel="noopener external nofollow noreferrer">TOOL</a>可以快速还原前端代码，方便二次编辑。</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>本着手册即查即用的原则，这篇博文写的十分简要，很少说明部分，直接贴出操作。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.runoob.com/w3cnote/windows-finds-port-usage.html" target="_blank" rel="noopener external nofollow noreferrer">Windows下如何查看某个端口被谁占用</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://zhuanlan.zhihu.com/p/26255460" target="_blank" rel="noopener external nofollow noreferrer">读懂内存</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.crucial.cn/memory" target="_blank" rel="noopener external nofollow noreferrer">英睿达</a><a href="#fnref:3" rev="footnote"> ↩</a></span></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://pandownload.com/index.html" target="_blank" rel="noopener external nofollow noreferrer">PanDownload</a><a href="#fnref:4" rev="footnote"> ↩</a></span></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://laod.cn/black-technology/baidupcs-go-baiduyun.html" target="_blank" rel="noopener external nofollow noreferrer">BaiduPCS-Go 使用CMD命令行全速下载百度云</a><a href="#fnref:5" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      <categories>
        <category>Handbook</category>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>端口占用查看</tag>
        <tag>wifi</tag>
        <tag>录屏</tag>
        <tag>内存型号</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeX-安装教程</title>
    <url>/LaTeX%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>作为一名研究僧，写论文，写文档，写日志，写报告，写书……还是比较平常的一件事，而office系列对于排版要求严格又惜时如金的人而言还是次选，所以开始入坑LaTeX，经过慎重的调研之后，选择了texlive+texstudio的形式开始入坑，当然还有很多其他选择，如果写完这篇还记得会在参考链接下附上<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[TeX Live & TeXstudio 安装手记](https://www.cnblogs.com/joyeecheung/p/3596255.html)
">[1]</span></a></sup><sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[第一篇tex文档编写](http://www.ctex.org/OnlineDocuments)
">[2]</span></a></sup>。</p>
<a id="more"></a>

<h2 id="调研选择"><a href="#调研选择" class="headerlink" title="调研选择"></a>调研选择</h2><p>其实这部分只是自己做一点记录，急需安装教程的请跳过，请看第2节。</p>
<p>经过多番Google、csdn以及知乎的查阅，大概了解了latex的编译环境和编辑环境，主流的有ctex、texlive、texstudio+winedt等等，我的选择变化大致如下：</p>
<ol>
<li><p>在上过的一门算法课中老师推荐了跨平台下的latex集成工具，ctex被建议在windows下使用，所以最初我的选择是ctex，附上清华镜像，<a href="https://mirrors.tuna.tsinghua.edu.cn/ctex/legacy/2.9/" target="_blank" rel="noopener external nofollow noreferrer" title="ctex清华镜像">Ctex-mirror</a>，官方网站<a href="http://www.ctex.org/HomePage" target="_blank" rel="noopener external nofollow noreferrer">CTeX</a>，加上ctex对中文的支持很好，且集成工具完整，当下载3G的安装包时，我又调研了不少教程，但是在某csdn的教程中看的评论有人评价ctex已不维护很久，同时ctex安装后会对系统环境变量进行覆盖，想想这个风险还是挺大的，毕竟安装需要配置换件变量的应用还挺多的，这篇<a href="https://liam.page/texlive/" target="_blank" rel="noopener external nofollow noreferrer">博文</a>有说明，接着看到在不少教程中推荐texlive（可谓官方），这是由 TUG (TeX User Group) 维护和发布的tex系统，接着有了第2个选择；</p>
</li>
<li><p>开始调研texlive，看看官网<a href="https://tug.org/texlive/" target="_blank" rel="noopener external nofollow noreferrer" title="texlive">TexLive</a>，维护还是比较好的，有2019最新版本，有多国镜像，有完整教学文档，感觉比ctex完善很多，果断放弃ctex，尽管这个时候安装文件也下载得差不多了，同时看到texstudio是tex编辑的不错的集成环境，官方的介绍是这样的：</p>
</li>
</ol>
<p><em>TeXstudio is an integrated writing environment for creating LaTeX documents. Our goal is to make writing LaTeX as easy and comfortable as possible. Therefore TeXstudio has numerous features like syntax-highlighting, integrated viewer, reference checking and various assistants.</em></p>
<p>安装提供zip压缩包直接解压使用，很适合我这种不喜欢安装包的人，因为便于迁移，抉择已定，开始下载和安装。</p>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><blockquote>
<p>先提供需要安装的文件（texlive和texstudio）的<a href="https://pan.baidu.com/s/1mRKV0VeNfjxhY6qGvSQdLw" target="_blank" rel="noopener external nofollow noreferrer" title="网盘链接">网盘链接</a>，提取码：uhbe </p>
</blockquote>
<p>官方提供了下载方式：</p>
<ol>
<li>texlive，<a href="https://mirror.bjtu.edu.cn/ctan/systems/texlive/Images/texlive2019.iso" target="_blank" rel="noopener external nofollow noreferrer">官方镜像</a>，如果访问不了，可以访问国内镜像，如<a href="http://mirrors.ustc.edu.cn/CTAN/systems/texlive/" target="_blank" rel="noopener external nofollow noreferrer">中科大镜像</a>；</li>
<li>texstudio，我选择的是zip压缩文件形式，<a href="https://github.com/texstudio-org/texstudio/releases/download/2.12.16/texstudio-2.12.16-win-portable-qt5.zip" target="_blank" rel="noopener external nofollow noreferrer">下载</a>；</li>
</ol>
<p>当然也可以直接下载我网盘分享的镜像和安装包，可以使用官方提供的md5值进行比对验证文件没有被篡改。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="TexLive-安装"><a href="#TexLive-安装" class="headerlink" title="TexLive 安装"></a>TexLive 安装</h3><p>下载好iso文件之后，由于我是win10系统，可以直接加载iso镜像文件，因此双击打开即可，如果是win7及以前的版本需要先解压iso文件，双击打开install-tl-advanced.bat文件，会出现以下界面：</p>
<p><img src="/images/post-texlive-install-1.jpg" alt="安装启动界面"><i class="img-caption">☆ 安装启动界面</i></p>
<p>点击<em>修改</em>更换需要安装的文件路径，路径建议不要带有中文和特殊字符；<br>点击<em>Advanced</em>修改安装选项，但默认是所有都选上，所以可以不用修改（因为涉及调用的宏包以及scheme选择，如果不了解还是默认，避免后续麻烦）；<br>点击<em>安装</em>，然后就是漫长的安装过程，安装期间可以做自己的事情，安装完成后显示如下：</p>
<p><img src="/images/post-texlive-install-2.jpg" alt="安装完成界面"><i class="img-caption">☆ 安装完成界面</i></p>
<p>做一下安装是否成功的检查：</p>
<ol>
<li>在开始菜单中搜索<em>TeX Live command-line</em>，执行以下命令：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xelatex -v</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>如果正常会显示如下信息，即正常的texlive版本号：</p>
<p><img src="/images/post-texlive-test-1.jpg" alt="测试正常界面"><i class="img-caption">☆ 测试正常界面</i></p>
<p>如果显示错误如下，应该是系统环境变量的问题，进入系统环境变量（系统属性-&gt;高级系统设置-&gt;环境变量），将<em>Path</em>环境变量新增texlive进去，即将安装好的texlive文件目录下的bin文件夹所在的路径作为环境变量。</p>
<p><img src="/images/post-texlive-test-2.jpg" alt="测试错误界面"><i class="img-caption">☆ 测试错误界面</i></p>
<h3 id="TexStudio-安装"><a href="#TexStudio-安装" class="headerlink" title="TexStudio 安装"></a>TexStudio 安装</h3><p>下载好zip压缩文件之后，直接解压就可以使用，十分方便！</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>主要是texstudio需要进行配置，更适合国内人士使用。</p>
<h3 id="语言设置"><a href="#语言设置" class="headerlink" title="语言设置"></a>语言设置</h3><p>打开texstudio之后，在主界面中显示的是英文，点击菜单栏的<em>Options</em>，点击<em>Configure TeXstudio</em>，在<em>General</em>选项下将<em>Language</em>选择为<em>zh_CN</em>，点击确定；</p>
<h3 id="编译环境设置"><a href="#编译环境设置" class="headerlink" title="编译环境设置"></a>编译环境设置</h3><p>在语言设置一样的窗口，此时显示语言是中文，点击<em>构建</em>-&gt;<em>默认编译器<em>设置为”XeLaTeX”，支持中文LaTeX文档；<br>将</em>构建</em>-&gt;<em>默认文献工具<em>设置为”Biber”；<br>在</em>命令</em>-&gt;<em>XeLaTeX</em>设置编译参数，使用 -shell-escape 参数以支持“minted”代码排版宏包；</p>
<p>点击<em>构建</em>-&gt;<em>默认编译器<em>设置为”Latexmk”实现一次性编译；<br>将</em>命令</em>-&gt;<em>Latexmk<em>的 -pdf 参数修改为 -xelatex 以支持中文；<br>在</em>命令</em>-&gt;<em>Latexmk</em>设置编译参数，使用 -shell-escape 参数以支持“minted”代码排版宏包；<br>点击确定</p>
<p>点击菜单栏<em>帮助</em>-&gt;<em>检查Latex安装信息</em>，若正确输出系统报告，说明texlive正常工作。</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>第一篇tex文档参照这篇博客，<a href="https://blog.csdn.net/yeler082/article/details/80665186" target="_blank" rel="noopener external nofollow noreferrer">Texlive+TeXstudio 入门安装使用</a>，照着输入，然后点击两个绿色箭头重叠的按钮，可以看到实时生成的文档。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.cnblogs.com/joyeecheung/p/3596255.html" target="_blank" rel="noopener external nofollow noreferrer">TeX Live &amp; TeXstudio 安装手记</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="http://www.ctex.org/OnlineDocuments" target="_blank" rel="noopener external nofollow noreferrer">第一篇tex文档编写</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      <categories>
        <category>Latex</category>
      </categories>
      <tags>
        <tag>Latex安装</tag>
        <tag>Windows10</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建个人博客(Hexo+Next+Github）</title>
    <url>/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>在经过多个教程摸索和尝试后，发现手把手有时候挺坑人的，毕竟经验还是要自己攒，不然没踩的坑迟早要踩到，最终我的个人博客<a href="https://linwhitehat.github.io/">林深时见璐</a>搭建完成，这篇教程会从本地博客建立到实现美观的网络博客进行记录分享，这篇博客也就会随着本博客的每一次升级完善而补充，希望能给想自建博客的朋友们提供帮助。</p>
<a id="more"></a>

<h2 id="最初的诞生"><a href="#最初的诞生" class="headerlink" title="最初的诞生"></a>最初的诞生</h2><p>我采用的搭建博客的方式是使用 <a href="https://pages.github.com/" target="_blank" rel="noopener external nofollow noreferrer">GitHub Pages</a> + <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener external nofollow noreferrer">Hexo</a> 的方式，这个应该是我摸索之后认为的对新手最友好也最优质的方式，只需要投入时间学习和运营，就能拥有美观的个人博客。以下的1 - 3小点是博客的雏形构建<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[博客雏形安装](https://www.jianshu.com/p/956c44c87fb1)">[1]</span></a></sup>。</p>
<h3 id="注册Github账号"><a href="#注册Github账号" class="headerlink" title="注册Github账号"></a>注册Github账号</h3><p>要使用 GitHub Pages，首先你要注册一个<a href="https://github.com/" target="_blank" rel="noopener external nofollow noreferrer">GitHub</a>账号。</p>
<p><img src="/images/blog-1.png" alt="GitHub注册页"><i class="img-caption">☆ GitHub注册页</i></p>
<h3 id="安装必备软件"><a href="#安装必备软件" class="headerlink" title="安装必备软件"></a>安装必备软件</h3><p>1) 安装<a href="https://git-scm.com/download/win" target="_blank" rel="noopener external nofollow noreferrer">Git</a>客户端</p>
<p>2) 安装<a href="https://nodejs.org/en/" target="_blank" rel="noopener external nofollow noreferrer">Node.js</a></p>
<h3 id="搭建博客"><a href="#搭建博客" class="headerlink" title="搭建博客"></a>搭建博客</h3><ol>
<li>新建博客</li>
</ol>
<p>配置GitHub，步骤如下:</p>
<p>1) 登录GitHub后新建项目（new repository），项目名由两部分组成即GitHub账号名和固定后缀<code>.github.io</code>，比如我的项目就是<code>linwhitehat.github.io</code>，填写完点击创建项目（create repository）。</p>
<p>2) 配置GitHub SSH密钥，本地打开git bash，输入<code>ssh-keygen -t rsa -C &quot;your&#39;s emaill address&quot;</code>，其中your’s email address换成GitHub账号的邮箱地址，第一次点击回车键（Enter）会显示存储位置，第二次点击回车键会显示输入密钥，按照要求输入密钥两次(输入过程是看不到密钥的)，之后在第一次显示的存储位置打开文件id_rsa.pub，复制文件内所有内容，在GitHub中点击头像可看的setting选项，在setting选项中可看到SSH and GPG keys选项，点击new SSH，然后输入title（方便密钥管理的名字），将刚才复制的内容粘贴到key中。</p>
<p>3）创建本地仓库，在本地选择不包含中文的文件路径，新建一个文件夹，进入文件夹并点击右键选择git bash，输入以下命令进行设置：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git config --global user.name <span class="string">"Your's name"</span></span><br><span class="line">git config --global user.email <span class="string">"Your's email address"</span></span><br></pre></td></tr></table></figure>
<p>其中<code>Your&#39;s name</code>和<code>Your&#39;s email address</code>替换为GitHub账户名和对应邮箱地址。</p>
<p>4) 安装Hexo，按照之前方式进入git bash终端，输入<code>node</code>检测Node.js是否安装成功，若出现<code>&gt;</code>则表示正常，退出node模式，输入以下命令安装Hexo：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo version</span><br></pre></td></tr></table></figure>
<p>看到输出版本号等信息表示安装Hexo成功，在当前新建的文件夹下新建一个hexo文件夹，在hexo文件夹中进入git bash，输入以下命令配置hexo，完成之后，在浏览器输入<code>http://localhost:4000</code>，正常则可看到初始化的博客，到此便完成本地博客的建立。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init</span><br><span class="line">npm install</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>5）配置Hexo到GitHub，在hexo文件夹下存在一个配置文件<code>_config.yml</code>，打开后可看到文件最后部分为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"> <span class="attr">type:</span></span><br></pre></td></tr></table></figure>
<p>将其修改为以下内容，其中<code>yourname</code>为GitHub账号名：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span>  </span><br><span class="line"> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"> <span class="attr">repository:</span> <span class="string">http://github.com/yourname/yourname.github.io.git</span></span><br><span class="line"> <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>保存后，在当前文件夹打开git bash并输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>若出现错误显示<code>ERROR Deployer not found: git</code>，则输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>若弹出填写GitHub账号用户名和密码则正常填写，完成之后在浏览器输入<code>https://yourname.github.io</code>，yourname替换为GitHub账户名，即可通过互联网访问博客。</p>
<p>6）如果不想自己新建，可以使用现有的他人博客项目进行改建，见<a href="#Section2">第2小节</a>。</p>
<ol start="2">
<li><span id="Section2">使用已有的博客模板</span></li>
</ol>
<p>1) 注册完成后搜索 <code>linwhitehat.github.io</code> 进入<a href="https://github.com/linwhitehat/linwhitehat.github.io" target="_blank" rel="noopener external nofollow noreferrer">我的仓库</a></p>
<p><img src="/images/blog-2.png" alt="GitHub项目"><i class="img-caption">☆ GitHub项目</i></p>
<p>点击右上角的 <strong>Fork</strong> 将我的仓库拉倒你的账号下</p>
<p>稍等一下，点击刷新，你会看到<strong>Fork</strong>了成功的页面</p>
<p><img src="/images/blog-3.png" alt="Fork项目"><i class="img-caption">☆ Fork项目</i></p>
<p>2) 修改仓库名</p>
<p>点击<strong>settings</strong>进入设置</p>
<p><img src="/images/blog-4.png" alt="项目设置修改"><i class="img-caption">☆ 项目设置修改</i></p>
<p id = "Rename"></p>
修改仓库名为 `你的Github账号名.github.io`，然后 Rename

<p><img src="/images/blog-5.png" alt="修改项目名"><i class="img-caption">☆ 修改项目名</i></p>
<p>这时你在在浏览器中输入 <code>你的Github账号名.github.io</code> 例如:<code>linwhitehat.github.io</code></p>
<p>你将会看到如下界面</p>
<p><img src="/images/blog-6.png" alt="博客首页"><i class="img-caption">☆ 博客首页</i></p>
<p>说明已经成功一半了😀当然，还需要修改博客的配置才能变成你的博客。</p>
<p>若是出现</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2178672-cfd55a22902a9d2c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="访问出错"><i class="img-caption">☆ 访问出错</i></p>
<p>则需要 <a href="#Rename">检查一下你的仓库名是否正确</a></p>
<h3 id="修改博客配置"><a href="#修改博客配置" class="headerlink" title="修改博客配置"></a>修改博客配置</h3><p>来到你的仓库，找到<code>_config.yml</code>文件,这是网站的全局配置文件。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2178672-c23d4a5d67c88084.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="博客配置文件"><i class="img-caption">☆ 博客配置文件</i></p>
<p>点击修改</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2178672-b37268df7a7852ca.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="修改配置文件"><i class="img-caption">☆ 修改配置文件</i></p>
<p>然后编辑<code>_config.yml</code>的内容</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2178672-0c8750f5a18dbe03.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="配置文件内容修改"><i class="img-caption">☆ 配置文件内容修改</i></p>
<p>接下来我们来详细说说以下配置文件的内容：</p>
<h3 id="基础设置说明"><a href="#基础设置说明" class="headerlink" title="基础设置说明"></a>基础设置说明</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site settings</span></span><br><span class="line">title: Your Blog    				    <span class="comment">#你博客的标题</span></span><br><span class="line">SEOTitle: 你的博客 | Your Blog    	    <span class="comment">#显示在浏览器上搜索的时候显示的标题</span></span><br><span class="line">header-img: img/post-bg-rwd.jpg  	    <span class="comment">#显示在首页的背景图片</span></span><br><span class="line">email: You@gmail.com	</span><br><span class="line">description: <span class="string">"You Blog"</span>  			    <span class="comment">#网站介绍</span></span><br><span class="line">keyword: <span class="string">"L1n, L1n Blog"</span> <span class="comment">#关键词</span></span><br><span class="line">url: <span class="string">"https://linwhitehat.github.io"</span>  <span class="comment"># 这个就是填写你的博客地址</span></span><br><span class="line">baseurl: <span class="string">""</span>                           <span class="comment"># 这个我们不用填写</span></span><br></pre></td></tr></table></figure>

<p>至此，一个初具形态的博客便生成了。</p>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><ol>
<li>本文中新建仓库建立博客的方式，在本地建立仓库后，又再新建一个hexo文件，且将hexo配置托管到GitHub之后，GitHub项目便被hexo文件夹下的<code>.deploy_git</code>覆盖，之后修改博客维护项目只需要在hexo文件夹下的git bash进行hexo处理即可。</li>
<li>本文博客搭建的目录结构如下，相关博客搭建及优化教程中涉及的路径参照此目录树：</li>
</ol>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 博客根目录</span><br><span class="line">|-- hexo</span><br><span class="line">|   |-- _config.yml</span><br><span class="line">|   |-- node_modules</span><br><span class="line">|   |-- public</span><br><span class="line">|   |-- scaffolds</span><br><span class="line">|   |-- source</span><br><span class="line">|   `-- themes</span><br><span class="line"></span><br><span class="line"># 主题根目录</span><br><span class="line">|-- themes</span><br><span class="line">    `-- next</span><br><span class="line">    |-- LICENSE.md</span><br><span class="line">    |-- README.md</span><br><span class="line">    |-- _config.yml</span><br><span class="line">    |-- docs</span><br><span class="line">    |-- languages</span><br><span class="line">    |-- layout</span><br><span class="line">    |-- scripts</span><br><span class="line">    `-- source</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>Hexo卸载方式，在git bash执行以下命令：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-cli -g</span><br><span class="line">npm uninstall hexo -g</span><br></pre></td></tr></table></figure>
<p>博客相应的文件目录需要手动删除。</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>博客搭建基本完成，但是博客中有很多地方可以自定义设计，这也是自建博客的初衷，熟悉Hexo和Next.Mist的配置后，会逐步优化博客样式。</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.jianshu.com/p/956c44c87fb1" target="_blank" rel="noopener external nofollow noreferrer">博客雏形安装</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      <categories>
        <category>技术分享</category>
        <category>博客</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
</search>
